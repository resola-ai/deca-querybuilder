"use strict";var Bn=Object.create;var lo=Object.defineProperty;var Qn=Object.getOwnPropertyDescriptor;var In=Object.getOwnPropertyNames;var Ln=Object.getPrototypeOf,Vn=Object.prototype.hasOwnProperty;var qn=(e,t)=>{for(var o in t)lo(e,o,{get:t[o],enumerable:!0})},Er=(e,t,o,n)=>{if(t&&typeof t=="object"||typeof t=="function")for(let r of In(t))!Vn.call(e,r)&&r!==o&&lo(e,r,{get:()=>t[r],enumerable:!(n=Qn(t,r))||n.enumerable});return e};var Ae=(e,t,o)=>(o=e!=null?Bn(Ln(e)):{},Er(t||!e||!e.__esModule?lo(o,"default",{value:e,enumerable:!0}):o,e)),Mn=e=>Er(lo({},"__esModule",{value:!0}),e);var wl={};qn(wl,{ActionElement:()=>Qe,DragHandle:()=>So,InlineCombinator:()=>wo,LogType:()=>be,NotToggle:()=>ko,QueryBuilder:()=>vn,QueryBuilderContext:()=>Le,QueryBuilderStateContext:()=>st,QueryBuilderStateProvider:()=>xn,Rule:()=>Gr,RuleComponents:()=>On,RuleGroup:()=>xr,RuleGroupBodyComponents:()=>Tn,RuleGroupHeaderComponents:()=>Cn,ShiftActions:()=>vr,TestID:()=>I,ValueEditor:()=>Or,ValueSelector:()=>Rt,add:()=>Ro,convertFromIC:()=>pt,convertQuery:()=>zn,convertToIC:()=>qo,default:()=>vn,defaultCELValueProcessor:()=>ul,defaultCombinators:()=>Ie,defaultCombinatorsExtended:()=>jn,defaultControlClassnames:()=>Fo,defaultControlElements:()=>St,defaultJoinChar:()=>kt,defaultMongoDBValueProcessor:()=>il,defaultOperatorNegationMap:()=>Wn,defaultOperators:()=>Po,defaultPlaceholderFieldGroupLabel:()=>Vr,defaultPlaceholderFieldLabel:()=>Lr,defaultPlaceholderFieldName:()=>wt,defaultPlaceholderOperatorGroupLabel:()=>Mr,defaultPlaceholderOperatorLabel:()=>qr,defaultPlaceholderOperatorName:()=>Et,defaultRuleProcessorCEL:()=>dt,defaultRuleProcessorElasticSearch:()=>jt,defaultRuleProcessorJSONata:()=>_t,defaultRuleProcessorJsonLogic:()=>Kt,defaultRuleProcessorMongoDB:()=>mt,defaultRuleProcessorParameterized:()=>At,defaultRuleProcessorSQL:()=>bo,defaultRuleProcessorSpEL:()=>yt,defaultSpELValueProcessor:()=>pl,defaultTranslations:()=>Bt,defaultValidator:()=>Xn,defaultValueProcessor:()=>sl,defaultValueProcessorByRule:()=>Ye,defaultValueProcessorCELByRule:()=>cl,defaultValueProcessorMongoDBByRule:()=>dl,defaultValueProcessorSpELByRule:()=>ml,filterFieldsByComparator:()=>Mt,findPath:()=>ye,formatQuery:()=>ll,generateAccessibleDescription:()=>Yo,generateID:()=>he,getCommonAncestorPath:()=>Xo,getCompatContextProvider:()=>yl,getFirstOption:()=>me,getOption:()=>Ce,getParentPath:()=>X,getQuerySelectorById:()=>ot,getValidationClassNames:()=>Yt,getValueSourcesUtil:()=>Zo,groupInvalidReasons:()=>Qt,insert:()=>Gl,isAncestor:()=>fl,isFlexibleOptionGroupArray:()=>Ne,isFullOptionGroupArray:()=>Zn,isOptionGroupArray:()=>qt,isPojo:()=>ie,isRuleGroup:()=>P,isRuleGroupType:()=>_,isRuleGroupTypeIC:()=>Ve,isRuleOrGroupValid:()=>fe,isValidationResult:()=>zo,joinWith:()=>ut,jsonLogicAdditionalOperators:()=>nn,mergeClassnames:()=>tr,mergeTranslation:()=>ue,mergeTranslations:()=>Rl,messages:()=>Xe,move:()=>ur,nullFreeArray:()=>Kn,numericRegex:()=>Vo,objectEntries:()=>or,objectKeys:()=>Zt,parseNumber:()=>W,pathIsDisabled:()=>bt,pathsAreEqual:()=>Me,preferProp:()=>dn,prepareRule:()=>nr,prepareRuleGroup:()=>eo,prepareRuleOrGroup:()=>lr,queryBuilderStore:()=>Bo,regenerateID:()=>ar,regenerateIDs:()=>Tt,remove:()=>ir,rootPath:()=>Gn,splitBy:()=>zr,standardClassnames:()=>E,toArray:()=>V,toFlatOptionArray:()=>jo,toFullOption:()=>ge,toFullOptionList:()=>qe,toFullOptionMap:()=>uo,toOptions:()=>pr,transformQuery:()=>xl,trimIfString:()=>M,uniqByIdentifier:()=>lt,uniqByName:()=>Yn,uniqOptGroups:()=>Vt,uniqOptList:()=>Wo,update:()=>sr,useControlledOrUncontrolled:()=>Lo,useDeprecatedProps:()=>it,useMergedContext:()=>Ct,usePreferAnyProp:()=>Al,usePreferProp:()=>to,usePrevious:()=>Io,useQueryBuilder:()=>fr,useQueryBuilderQuery:()=>Jn,useQueryBuilderSchema:()=>dr,useQueryBuilderSelector:()=>Qo,useQueryBuilderSetup:()=>mr,useReactDndWarning:()=>ro,useRule:()=>yr,useRuleGroup:()=>br,useSelectElementChangeHandler:()=>hr,useStopEventPropagation:()=>xe,useValueEditor:()=>Rr,useValueSelector:()=>gr});module.exports=Mn(wl);var kr=Ae(require("react")),Qe=e=>kr.createElement("button",{type:"button","data-testid":e.testID,disabled:e.disabled&&!e.disabledTranslation,className:e.className,title:e.disabledTranslation&&e.disabled?e.disabledTranslation.title:e.title,onClick:t=>e.handleOnClick(t)},e.disabledTranslation&&e.disabled?e.disabledTranslation.label:e.label);var Br=Ae(require("react")),Qr=require("react"),So=(0,Qr.forwardRef)((e,t)=>Br.createElement("span",{"data-testid":e.testID,ref:t,className:e.className,title:e.title},e.label));var Do=Ae(require("react"));var Ir="~",ao="------",wt=Ir,Lr=ao,Vr=ao,Et=Ir,qr=ao,Mr=ao,kt=",",Bt={fields:{title:"Fields",placeholderName:wt,placeholderLabel:Lr,placeholderGroupLabel:Vr},operators:{title:"Operators",placeholderName:Et,placeholderLabel:qr,placeholderGroupLabel:Mr},value:{title:"Value"},removeRule:{label:"\u2A2F",title:"Remove rule"},removeGroup:{label:"\u2A2F",title:"Remove group"},addRule:{label:"+ Rule",title:"Add rule"},addGroup:{label:"+ Group",title:"Add group"},combinators:{title:"Combinators"},notToggle:{label:"Not",title:"Invert this group"},cloneRule:{label:"\u29C9",title:"Clone rule"},cloneRuleGroup:{label:"\u29C9",title:"Clone group"},shiftActionUp:{label:"\u02C4",title:"Shift up"},shiftActionDown:{label:"\u02C5",title:"Shift down"},dragHandle:{label:"\u205E\u205E",title:"Drag handle"},lockRule:{label:"\u{1F513}",title:"Lock rule"},lockGroup:{label:"\u{1F513}",title:"Lock group"},lockRuleDisabled:{label:"\u{1F512}",title:"Unlock rule"},lockGroupDisabled:{label:"\u{1F512}",title:"Unlock group"},valueSourceSelector:{title:"Value source"}},Po=[{name:"=",value:"=",label:"="},{name:"!=",value:"!=",label:"!="},{name:"<",value:"<",label:"<"},{name:">",value:">",label:">"},{name:"<=",value:"<=",label:"<="},{name:">=",value:">=",label:">="},{name:"contains",value:"contains",label:"contains"},{name:"beginsWith",value:"beginsWith",label:"begins with"},{name:"endsWith",value:"endsWith",label:"ends with"},{name:"doesNotContain",value:"doesNotContain",label:"does not contain"},{name:"doesNotBeginWith",value:"doesNotBeginWith",label:"does not begin with"},{name:"doesNotEndWith",value:"doesNotEndWith",label:"does not end with"},{name:"null",value:"null",label:"is null"},{name:"notNull",value:"notNull",label:"is not null"},{name:"in",value:"in",label:"in"},{name:"notIn",value:"notIn",label:"not in"},{name:"between",value:"between",label:"between"},{name:"notBetween",value:"notBetween",label:"not between"}],Wn={"=":"!=","!=":"=","<":">=","<=":">",">":"<=",">=":"<",beginsWith:"doesNotBeginWith",doesNotBeginWith:"beginsWith",endsWith:"doesNotEndWith",doesNotEndWith:"endsWith",contains:"doesNotContain",doesNotContain:"contains",between:"notBetween",notBetween:"between",in:"notIn",notIn:"in",notNull:"null",null:"notNull"},Ie=[{name:"and",value:"and",label:"AND"},{name:"or",value:"or",label:"OR"}],jn=[...Ie,{name:"xor",value:"xor",label:"XOR"}],E={queryBuilder:"queryBuilder",ruleGroup:"ruleGroup",header:"ruleGroup-header",body:"ruleGroup-body",combinators:"ruleGroup-combinators",addRule:"ruleGroup-addRule",addGroup:"ruleGroup-addGroup",cloneRule:"rule-cloneRule",cloneGroup:"ruleGroup-cloneGroup",removeGroup:"ruleGroup-remove",notToggle:"ruleGroup-notToggle",rule:"rule",fields:"rule-fields",operators:"rule-operators",value:"rule-value",removeRule:"rule-remove",betweenRules:"betweenRules",valid:"queryBuilder-valid",invalid:"queryBuilder-invalid",shiftActions:"shiftActions",dndDragging:"dndDragging",dndOver:"dndOver",dndCopy:"dndCopy",dragHandle:"queryBuilder-dragHandle",disabled:"queryBuilder-disabled",lockRule:"rule-lock",lockGroup:"ruleGroup-lock",valueSource:"rule-valueSource",valueListItem:"rule-value-list-item",branches:"queryBuilder-branches"},Fo={queryBuilder:"",ruleGroup:"",header:"",body:"",combinators:"",addRule:"",addGroup:"",cloneRule:"",cloneGroup:"",removeGroup:"",notToggle:"",rule:"",fields:"",operators:"",value:"",removeRule:"",shiftActions:"",dragHandle:"",lockRule:"",lockGroup:"",valueSource:"",actionElement:"",valueSelector:""},Qt={empty:"empty",invalidCombinator:"invalid combinator",invalidIndependentCombinators:"invalid independent combinators"},I={rule:"rule",ruleGroup:"rule-group",inlineCombinator:"inline-combinator",addGroup:"add-group",removeGroup:"remove-group",cloneGroup:"clone-group",cloneRule:"clone-rule",addRule:"add-rule",removeRule:"remove-rule",combinators:"combinators",fields:"fields",operators:"operators",valueEditor:"value-editor",notToggle:"not-toggle",shiftActions:"shift-actions",dragHandle:"drag-handle",lockRule:"lock-rule",lockGroup:"lock-group",valueSourceSelector:"value-source-selector"},be={parentPathDisabled:"action aborted: parent path disabled",pathDisabled:"action aborted: path is disabled",queryUpdate:"query updated",onAddRuleFalse:"onAddRule callback returned false",onAddGroupFalse:"onAddGroup callback returned false",onMoveRuleFalse:"onMoveRule callback returned false",onMoveGroupFalse:"onMoveGroup callback returned false",onRemoveFalse:"onRemove callback returned false",add:"rule or group added",remove:"rule or group removed",update:"rule or group updated",move:"rule or group moved"};var wo=e=>{let{component:t,...o}=e;return Do.createElement("div",{className:E.betweenRules,"data-testid":I.inlineCombinator},Do.createElement(t,{...o,testID:I.combinators}))};var Eo=Ae(require("react")),ko=e=>Eo.createElement("label",{"data-testid":e.testID,className:e.className,title:e.title},Eo.createElement("input",{type:"checkbox",onChange:t=>e.handleOnChange(t.target.checked),checked:!!e.checked,disabled:e.disabled}),e.label);var ht=Ae(require("react")),gn=require("react-redux");var Xe={errorInvalidIndependentCombinatorsProp:"QueryBuilder was rendered with a truthy independentCombinators prop. This prop is deprecated and unnecessary. Furthermore, the initial query/defaultQuery prop was of type RuleGroupType instead of type RuleGroupIC. More info: https://react-querybuilder.js.org/docs/components/querybuilder#independent-combinators",errorUnnecessaryIndependentCombinatorsProp:"QueryBuilder was rendered with the deprecated and unnecessary independentCombinators prop. To use independent combinators, make sure the query/defaultQuery prop is of type RuleGroupIC when the component mounts. More info: https://react-querybuilder.js.org/docs/components/querybuilder#independent-combinators",errorDeprecatedRuleGroupProps:"A custom RuleGroup component has rendered a standard RuleGroup component with deprecated props. The combinator, not, and rules props should not be used. Instead, the full group object should be passed as the ruleGroup prop.",errorDeprecatedRuleProps:"A custom RuleGroup component has rendered a standard Rule component with deprecated props. The field, operator, value, and valueSource props should not be used. Instead, the full rule object should be passed as the rule prop.",errorBothQueryDefaultQuery:"QueryBuilder was rendered with both query and defaultQuery props. QueryBuilder must be either controlled or uncontrolled (specify either the query prop, or the defaultQuery prop, but not both). Decide between using a controlled or uncontrolled query builder and remove one of these props. More info: https://reactjs.org/link/controlled-components",errorUncontrolledToControlled:"QueryBuilder is changing from an uncontrolled component to be controlled. This is likely caused by the query changing from undefined to a defined value, which should not happen. Decide between using a controlled or uncontrolled query builder for the lifetime of the component. More info: https://reactjs.org/link/controlled-components",errorControlledToUncontrolled:"QueryBuilder is changing from a controlled component to be uncontrolled. This is likely caused by the query changing from defined to undefined, which should not happen. Decide between using a controlled or uncontrolled query builder for the lifetime of the component. More info: https://reactjs.org/link/controlled-components",errorEnabledDndWithoutReactDnD:"QueryBuilder was rendered with the enableDragAndDrop prop set to true, but either react-dnd or react-dnd-html5-backend (or both) was not installed. To enable drag-and-drop functionality, install both packages and wrap QueryBuilder in QueryBuilderDnD from @react-querybuilder/dnd."};var so=require("react-redux");var Ur=require("@reduxjs/toolkit"),Lt=Ae(require("react")),Hr=require("react-redux");var Wr=require("@reduxjs/toolkit"),Un={},vt=(0,Wr.createSlice)({name:"queries",initialState:Un,reducers:{setQueryState:(e,{payload:{qbId:t,query:o}})=>{e[t]=o}},selectors:{getQuerySelectorById:(e,t)=>e[t]}});var jr=require("@reduxjs/toolkit");var Hn={[Xe.errorInvalidIndependentCombinatorsProp]:!1,[Xe.errorUnnecessaryIndependentCombinatorsProp]:!1,[Xe.errorDeprecatedRuleGroupProps]:!1,[Xe.errorDeprecatedRuleProps]:!1,[Xe.errorBothQueryDefaultQuery]:!1,[Xe.errorUncontrolledToControlled]:!1,[Xe.errorControlledToUncontrolled]:!1,[Xe.errorEnabledDndWithoutReactDnD]:!1},It=(0,jr.createSlice)({name:"warnings",initialState:Hn,reducers:{rqbWarn:(e,{payload:t})=>{e[t]||(console.error(t),e[t]=!0)}}});var _n={queries:vt.getInitialState(),warnings:It.getInitialState()},Bo=(0,Ur.configureStore)({reducer:{queries:vt.reducer,warnings:It.reducer},preloadedState:_n,middleware:e=>e({serializableCheck:{ignoredActions:["queries/setQueryState"],ignoredPaths:[/^queries\b.*\.rules\.\d+\.value$/]}})}),st=Lt.createContext(null),_r=(0,Hr.createSelectorHook)(st),Qo=(e,t)=>{let o=Lt.useContext(Le);return _r(e,t)??o?.initialQuery},Jn=e=>{let t=Lt.useContext(Le);return _r(ot(e?.schema.qbId??t.qbId??""))??t?.initialQuery},ot=e=>t=>vt.selectors.getQuerySelectorById({queries:t.queries},e);var io=({payload:e,onQueryChange:t})=>o=>{o(vt.actions.setQueryState(e)),typeof t=="function"&&t(e.query)},Ot=(0,so.createDispatchHook)(st),Jr=(0,so.createStoreHook)(st),{rqbWarn:Zl}=It.actions;var Kr=require("react"),Io=e=>{let t=(0,Kr.useRef)({value:e,prev:null}),o=t.current.value;return e!==o&&(t.current={value:e,prev:o}),t.current.prev};var Lo=e=>{let t=Ot(),{defaultQuery:o,queryProp:n}=e,r=Io(!!n)};function it(e,t,o){let n=Ot()}var We=require("react");var zr=(e,t=kt)=>typeof e=="string"?e.split(`\\${t}`).map(o=>o.split(t)).reduce((o,n,r)=>r===0?n:[...o.slice(0,o.length-1),`${o[o.length-1]}${t}${n[0]}`,...n.slice(1)],[]):[],ut=(e,t=kt)=>e.map(o=>`${o??""}`.replaceAll(t[0],`\\${t[0]}`)).join(t),M=e=>typeof e=="string"?e.trim():e,V=e=>Array.isArray(e)?e.map(M):typeof e=="string"?zr(e,kt).filter(t=>!/^\s*$/.test(t)).map(t=>t.trim()):typeof e=="number"?[e]:[],Kn=e=>e.every(t=>t===!1||(t??!1)!==!1);var Xr=require("numeric-quantity"),Vo=new RegExp(Xr.numericRegex.source.replace(/^\^/,"^\\s*").replace(/\$$/,"\\s*$")),ie=e=>e===null||typeof e!="object"?!1:Object.getPrototypeOf(e)===Object.prototype;var P=e=>ie(e)&&Array.isArray(e.rules),_=e=>P(e)&&typeof e.combinator=="string",Ve=e=>P(e)&&typeof e.combinator>"u";var Yr=e=>P(e)?Zr(e):e,Zr=e=>{let t=[],o=r=>t.push(Yr(r)),n=0;for(let r=0;r<e.rules.length;r+=2)if(e.rules.length===1)o(e.rules[0]);else if(e.rules[r+1]==="and"){n=r;let l=1;for(;e.rules[n+l]==="and";)r+=2,l+=2;t.push({rules:e.rules.slice(n,r+1).map(Yr)}),r-=2}else e.rules[r+1]==="or"&&(r===0||r===e.rules.length-3?((r===0||e.rules[r-1]==="or")&&o(e.rules[r]),o(e.rules[r+1]),r===e.rules.length-3&&o(e.rules[r+2])):(e.rules[r-1]==="and"||o(e.rules[r]),o(e.rules[r+1])));return t.length===1&&typeof t[0]=="object"&&P(t[0])?{...e,...t[0]}:{...e,rules:t}},pt=e=>{if(_(e))return e;let t=Zr(e),o=t.rules.map(l=>typeof l=="string"||!P(l)?l:pt(l)),n=o.length<2?"and":o[1],r=o.filter(l=>typeof l!="string");return{...t,combinator:n,rules:r}},qo=e=>{if(Ve(e))return e;let{combinator:t,...o}=e,n=[],{length:r}=e.rules;return e.rules.forEach((l,a)=>{P(l)?n.push(qo(l)):n.push(l),t&&a<r-1&&n.push(t)}),{...o,rules:n}};function zn(e){return Ve(e)?pt(e):qo(e)}var Xn=e=>{let t={},o=r=>{},n=r=>{let l=[];if(r.rules.length===0)l.push(Qt.empty);else if(!_(r)){let a=!1;for(let p=0;p<r.rules.length&&!a;p++)(p%2===0&&typeof r.rules[p]=="string"||p%2===1&&typeof r.rules[p]!="string"||p%2===1&&typeof r.rules[p]=="string"&&!Ie.map(f=>f.name).includes(r.rules[p]))&&(a=!0);a&&l.push(Qt.invalidIndependentCombinators)}_(r)&&!Ie.map(a=>a.name).includes(r.combinator)&&r.rules.length>1&&l.push(Qt.invalidCombinator),r.id&&(l.length?t[r.id]={valid:!1,reasons:l}:t[r.id]=!0),r.rules.forEach(a=>{typeof a=="string"||(P(a)?n(a):o(a))})};return n(e),t};var Mo=require("immer");var en=e=>ie(e)&&"name"in e&&typeof e.name=="string",tn=e=>ie(e)&&"value"in e&&typeof e.value=="string";function ge(e,t){return(0,Mo.produce)(n=>{let r={},l=!!t;if(en(n)&&!tn(n)?(r.value=n.name,l=!0):!en(n)&&tn(n)&&(r.name=n.value,l=!0),l)return Object.assign({},t,n,r)})(e)}function qe(e,t){return Array.isArray(e)?(0,Mo.produce)(n=>{if(Ne(n))for(let r of n)r.options.forEach((l,a)=>r.options[a]=ge(l,t));else n.forEach((r,l)=>n[l]=ge(r,t))})(e):[]}function uo(e,t){return Object.fromEntries(Object.entries(e).map(([o,n])=>[o,ge(n,t)]))}var Yn=e=>lt(e),lt=e=>{let t=new Set,o=[];return e.forEach(n=>{t.has(n.value??n.name)||(t.add(n.value??n.name),o.push(n))}),e.length===o.length?e:o},Vt=e=>{let t=new Set,o=new Set,n=[];return e.forEach(r=>{if(!t.has(r.label)){t.add(r.label);let l=[];r.options.forEach(a=>{o.has(a.value??a.name)||(o.add(a.value??a.name),l.push(ge(a)))}),n.push({...r,options:l})}}),n},Wo=e=>Ne(e)?Vt(e):lt(e.map(t=>ge(t)));var qt=e=>Array.isArray(e)&&e.length>0&&ie(e[0])&&"options"in e[0]&&Array.isArray(e[0].options),Ne=e=>{if(Array.isArray(e)){for(let t of e)if(ie(t)&&"options"in t)for(let o of t.options)return!!(ie(o)&&("name"in o||"value"in o))}return!1},Zn=e=>{if(Array.isArray(e)){for(let t of e)if(ie(t)&&"options"in t)for(let o of t.options)return!!(ie(o)&&"name"in o&&"value"in o)}return!1},Ce=(e,t)=>(qt(e)?e.flatMap(o=>o.options):e).find(o=>o.value===t||o.name===t),me=e=>{if(!Array.isArray(e)||e.length===0)return null;if(Ne(e)){for(let t of e)if(t.options.length>0)return t.options[0].value??t.options[0].name;return null}return e[0].value??e[0].name},jo=e=>lt(qt(e)?e.flatMap(t=>t.options):e);var on=(e,t,o)=>{let n=ge(e),r=ge(o);return n.value===r.value?!1:typeof n.comparator=="string"?n[n.comparator]===r[n.comparator]:n.comparator?.(r,t)??!1},Mt=(e,t,o)=>{if(!e.comparator){let n=r=>(r.value??r.name)!==(e.value??e.name);return Ne(t)?t.map(r=>({...r,options:r.options.filter(n)})):t.filter(n)}return Ne(t)?t.map(n=>({...n,options:n.options.filter(r=>on(e,o,r))})).filter(n=>n.options.length>0):t.filter(n=>on(e,o,n))};var rn=require("numeric-quantity"),W=(e,t={})=>{if(!t.parseNumbers||typeof e=="bigint"||typeof e=="number")return e;if(t.parseNumbers==="native")return parseFloat(e);let o=(0,rn.numericQuantity)(e,{allowTrailingInvalid:t.parseNumbers==="enhanced",romanNumerals:!0,round:!1});return isNaN(o)?e:o};var po=e=>{switch(e.toLowerCase()){case"null":return"is null";case"notnull":return"is not null";case"notin":return"not in";case"notbetween":return"not between";case"contains":case"beginswith":case"endswith":return"like";case"doesnotcontain":case"doesnotbeginwith":case"doesnotendwith":return"not like";default:return e}},Uo={"=":"$eq","!=":"$ne","<":"$lt","<=":"$lte",">":"$gt",">=":"$gte",in:"$in",notIn:"$nin"},Ho={and:"&&",or:"||"},nn={startsWith:(e,t)=>typeof e=="string"&&e.startsWith(t),endsWith:(e,t)=>typeof e=="string"&&e.endsWith(t)},_o=e=>({...e,rules:e.rules.map(t=>{if(typeof t=="string")return t;if(P(t))return _o(t);if(Array.isArray(t.value))return{...t,value:t.value.map(n=>W(n,{parseNumbers:!0}))};let o=V(t.value).map(n=>W(n,{parseNumbers:!0}));if(o.every(n=>typeof n=="number")){if(o.length>1)return{...t,value:o};if(o.length===1)return{...t,value:o[0]}}return t})}),Ee=e=>typeof e=="string"&&e.length>0||typeof e=="number"&&!isNaN(e)||typeof e!="string"&&typeof e!="number",Q=(e,t)=>t&&(typeof e=="number"||typeof e=="bigint"||typeof e=="string"&&Vo.test(e)),ln=e=>e.length>=3,at=(e=["",""])=>Array.isArray(e)?e:typeof e=="string"?[e,e]:e??["",""],rt=e=>e===null||typeof e>"u"||e==="";var co=e=>/^(does)?not/i.test(e),ct=(e,t)=>typeof e!="string"||!t?e:e.replaceAll('"','\\"'),dt=({field:e,operator:t,value:o,valueSource:n},{escapeQuotes:r,parseNumbers:l}={})=>{let a=n==="field",p=t.replace(/^=$/,"=="),f=typeof o=="number"||typeof o=="boolean"||typeof o=="bigint"||Q(o,l);switch(p){case"<":case"<=":case"==":case"!=":case">":case">=":return`${e} ${p} ${a||f?M(o):`"${ct(o,r)}"`}`;case"contains":case"doesNotContain":return`${co(p)?"!":""}${e}.contains(${a?M(o):`"${ct(o,r)}"`})`;case"beginsWith":case"doesNotBeginWith":return`${co(p)?"!":""}${e}.startsWith(${a?M(o):`"${ct(o,r)}"`})`;case"endsWith":case"doesNotEndWith":return`${co(p)?"!":""}${e}.endsWith(${a?M(o):`"${ct(o,r)}"`})`;case"null":return`${e} == null`;case"notNull":return`${e} != null`;case"in":case"notIn":{let s=co(p),m=V(o);return`${s?"!(":""}${e} in [${m.map(u=>a||Q(u,l)?`${M(u)}`:`"${ct(u,r)}"`).join(", ")}]${s?")":""}`}case"between":case"notBetween":{let s=V(o);if(s.length>=2&&!rt(s[0])&&!rt(s[1])){let[m,u]=s,c=Q(m,!0)?W(m,{parseNumbers:!0}):NaN,y=Q(u,!0)?W(u,{parseNumbers:!0}):NaN,R=isNaN(c)?a?`${m}`:`"${ct(m,r)}"`:c,i=isNaN(y)?a?`${u}`:`"${ct(u,r)}"`:y;if(R===c&&i===y&&y<c){let d=y;i=c,R=d}return t==="between"?`(${e} >= ${R} && ${e} <= ${i})`:`(${e} < ${R} || ${e} > ${i})`}else return""}}return""};var mt=({field:e,operator:t,value:o,valueSource:n},{parseNumbers:r}={})=>{let l=n==="field",a=typeof o=="number"||typeof o=="boolean"||typeof o=="bigint"||Q(o,r);if(t==="="&&!l)return`{"${e}":${a?M(o):JSON.stringify(o)}}`;switch(t){case"<":case"<=":case"=":case"!=":case">":case">=":{let p=Uo[t];return l?`{"$expr":{"${p}":["$${e}","$${o}"]}}`:`{"${e}":{"${p}":${a?M(o):JSON.stringify(o)}}}`}case"contains":return l?`{"$where":"this.${e}.includes(this.${o})"}`:`{"${e}":{"$regex":${JSON.stringify(o)}}}`;case"beginsWith":return l?`{"$where":"this.${e}.startsWith(this.${o})"}`:`{"${e}":{"$regex":${JSON.stringify(`^${o}`)}}}`;case"endsWith":return l?`{"$where":"this.${e}.endsWith(this.${o})"}`:`{"${e}":{"$regex":${JSON.stringify(`${o}$`)}}}`;case"doesNotContain":return l?`{"$where":"!this.${e}.includes(this.${o})"}`:`{"${e}":{"$not":{"$regex":${JSON.stringify(o)}}}}`;case"doesNotBeginWith":return l?`{"$where":"!this.${e}.startsWith(this.${o})"}`:`{"${e}":{"$not":{"$regex":${JSON.stringify(`^${o}`)}}}}`;case"doesNotEndWith":return l?`{"$where":"!this.${e}.endsWith(this.${o})"}`:`{"${e}":{"$not":{"$regex":${JSON.stringify(`${o}$`)}}}}`;case"null":return`{"${e}":null}`;case"notNull":return`{"${e}":{"$ne":null}}`;case"in":case"notIn":{let p=V(o);return l?`{"$where":"${t==="notIn"?"!":""}[${p.map(f=>`this.${f}`).join(",")}].includes(this.${e})"}`:`{"${e}":{"${Uo[t]}":[${p.map(f=>Q(f,r)?`${M(f)}`:JSON.stringify(f)).join(",")}]}}`}case"between":case"notBetween":{let p=V(o);if(p.length>=2&&Ee(p[0])&&Ee(p[1])){let[f,s]=p,m=Q(f,!0)?W(f,{parseNumbers:!0}):NaN,u=Q(s,!0)?W(s,{parseNumbers:!0}):NaN,c=l||!isNaN(m)?`${f}`:`${JSON.stringify(f)}`,y=l||!isNaN(u)?`${s}`:`${JSON.stringify(s)}`;return t==="between"?l?`{"$and":[{"$expr":{"$gte":["$${e}","$${c}"]}},{"$expr":{"$lte":["$${e}","$${y}"]}}]}`:`{"${e}":{"$gte":${c},"$lte":${y}}}`:l?`{"$or":[{"$expr":{"$lt":["$${e}","$${c}"]}},{"$expr":{"$gt":["$${e}","$${y}"]}}]}`:`{"$or":[{"${e}":{"$lt":${c}}},{"${e}":{"$gt":${y}}}]}`}else return""}}return""};var mo=e=>/^(does)?not/i.test(e),Jo=(e,t)=>t?`!(${e})`:`${e}`,ft=(e,t)=>typeof e!="string"||!t?e:e.replaceAll("'","\\'"),yt=({field:e,operator:t,value:o,valueSource:n},{escapeQuotes:r,parseNumbers:l}={})=>{let a=n==="field",p=t.replace(/^=$/,"=="),f=typeof o=="number"||typeof o=="boolean"||typeof o=="bigint"||Q(o,l);switch(p){case"<":case"<=":case"==":case"!=":case">":case">=":return`${e} ${p} ${a||f?M(o):`'${ft(o,r)}'`}`;case"contains":case"doesNotContain":return Jo(`${e} matches ${a||f?M(o):`'${ft(o,r)}'`}`,mo(p));case"beginsWith":case"doesNotBeginWith":{let s=a?`'^'.concat(${M(o)})`:`'${typeof o=="string"&&!o.startsWith("^")||f?"^":""}${ft(o,r)}'`;return Jo(`${e} matches ${s}`,mo(p))}case"endsWith":case"doesNotEndWith":{let s=a?`${M(o)}.concat('$')`:`'${ft(o,r)}${typeof o=="string"&&!o.endsWith("$")||f?"$":""}'`;return Jo(`${e} matches ${s}`,mo(p))}case"null":return`${e} == null`;case"notNull":return`${e} != null`;case"in":case"notIn":{let s=mo(p)?"!":"",m=V(o);return m.length>0?`${s}(${m.map(u=>`${e} == ${a||Q(u,l)?`${M(u)}`:`'${ft(u,r)}'`}`).join(" or ")})`:""}case"between":case"notBetween":{let s=V(o);if(s.length>=2&&!rt(s[0])&&!rt(s[1])){let[m,u]=s,c=Q(m,!0)?W(m,{parseNumbers:!0}):NaN,y=Q(u,!0)?W(u,{parseNumbers:!0}):NaN,R=isNaN(c)?a?`${m}`:`'${ft(m,r)}'`:c,i=isNaN(y)?a?`${u}`:`'${ft(u,r)}'`:y;if(R===c&&i===y&&y<c){let d=y;i=c,R=d}return t==="between"?`(${e} >= ${R} and ${e} <= ${i})`:`(${e} < ${R} or ${e} > ${i})`}else return""}}return""};var el=(e,t,o)=>o&&typeof e=="string"?e.replaceAll(`${t}`,`${t}${t}`):e,Ye=({operator:e,value:t,valueSource:o},{escapeQuotes:n,parseNumbers:r,quoteFieldNamesWith:l,quoteValuesWith:a}={})=>{let p=o==="field",[f,s]=at(l),m=e.toLowerCase(),u=a||"'",c=i=>el(i,u,n),y=i=>`${u}${c(i)}${u}`,R=i=>`${f}${i}${s}`;switch(m){case"null":case"notnull":return"";case"in":case"notin":{let i=V(t);return i.length>0?`(${i.map(d=>p?R(d):Q(d,r)?`${M(d)}`:`${y(d)}`).join(", ")})`:""}case"between":case"notbetween":{let i=V(t);if(i.length>=2&&Ee(i[0])&&Ee(i[1])){let[d,k]=i;return p?`${R(d)} and ${R(k)}`:Q(d,r)&&Q(k,r)?`${M(d)} and ${M(k)}`:`${y(d)} and ${y(k)}`}return""}case"contains":case"doesnotcontain":return p?`${u}%${u} || ${R(t)} || ${u}%${u}`:`${u}%${c(t)}%${u}`;case"beginswith":case"doesnotbeginwith":return p?`${R(t)} || ${u}%${u}`:`${u}${c(t)}%${u}`;case"endswith":case"doesnotendwith":return p?`${u}%${u} || ${R(t)}`:`${u}%${c(t)}${u}`}return typeof t=="boolean"?t?"TRUE":"FALSE":p?R(t):Q(t,r)?`${M(t)}`:`${y(t)}`};var tl={"<":"lt","<=":"lte",">":"gt",">=":"gte"},fo=(e,t)=>/^(does)?not/i.test(e)?{bool:{must_not:t}}:t,Ko=e=>e?.replace(/('|\\)/g,"\\$1"),ol={beginsWith:"startsWith",doesNotContain:"contains",doesNotBeginWith:"startsWith",doesNotEndWith:"endsWith"},rl=(e,t,o)=>{let n=`doc['${e}'].${ol[t]??t}(doc['${o}'])`;return t.startsWith("d")?`!${n}`:n},Wt=(e,t)=>typeof e=="boolean"?e:Q(e,t)?W(e,{parseNumbers:t}):e,jt=({field:e,operator:t,value:o,valueSource:n},{parseNumbers:r}={})=>{if(n==="field"){if(V(o).some(a=>typeof a!="string"))return!1;let l=Ko(e);switch(t){case"=":case"!=":case">":case">=":case"<":case"<=":{let a=t==="="?"==":t,p=Ko(o);return p?{bool:{filter:{script:{script:`doc['${l}'] ${a} doc['${p}']`}}}}:!1}case"in":case"notIn":{let a=V(o);if(a.length>0){let p=a.map(f=>({bool:{filter:{script:{script:`doc['${l}'] == doc['${f}']`}}}}));return{bool:t==="in"?{should:p}:{must_not:p}}}return!1}case"between":case"notBetween":{let a=V(o);if(a.length>=2&&a[0]&&a[1]){let p=`doc['${l}'] >= doc['${a[0]}'] && doc['${l}'] <= doc['${a[1]}']`;return{bool:{filter:{script:{script:t==="notBetween"?`!(${p})`:p}}}}}return!1}case"contains":case"doesNotContain":case"beginsWith":case"doesNotBeginWith":case"endsWith":case"doesNotEndWith":{let a=Ko(o);return a?{bool:{filter:{script:{script:rl(l,t,a)}}}}:!1}}}switch(t){case"<":case"<=":case">":case">=":return{range:{[e]:{[tl[t]]:Wt(o,r)}}};case"=":return{term:{[e]:Wt(o,r)}};case"!=":return{bool:{must_not:{term:{[e]:Wt(o,r)}}}};case"null":return{bool:{must_not:{exists:{field:e}}}};case"notNull":return{exists:{field:e}};case"in":case"notIn":{let l=V(o).map(a=>Wt(a,r));if(l.length>0){let a=l.map(p=>({term:{[e]:Wt(p,r)}}));return{bool:t==="in"?{should:a}:{must_not:a}}}return!1}case"between":case"notBetween":{let l=V(o);if(l.length>=2&&Ee(l[0])&&Ee(l[1])){let[a,p]=l;if(Q(a,!0)&&Q(p,!0)){let f=W(a,{parseNumbers:!0}),s=W(p,{parseNumbers:!0});if(s<f){let m=s;p=f,a=m}else a=f,p=s}return fo(t,{range:{[e]:{gte:a,lte:p}}})}return!1}case"contains":case"doesNotContain":return fo(t,{regexp:{[e]:{value:`.*${o}.*`}}});case"beginsWith":case"doesNotBeginWith":return fo(t,{regexp:{[e]:{value:`${o}.*`}}});case"endsWith":case"doesNotEndWith":return fo(t,{regexp:{[e]:{value:`.*${o}`}}})}return!1};var yo=e=>/^(does)?not/i.test(e),Ut=(e,t)=>`"${typeof e!="string"||!t?e:e.replaceAll('"','\\"')}"`,Ht=(e,t)=>t?`$not(${e})`:`${e}`,an=e=>`${e}`.replace(/[|\\{}()[\]^$+*?.]/g,"\\$&").replace(/-/g,"\\x2d"),_t=({field:e,operator:t,value:o,valueSource:n},{escapeQuotes:r,parseNumbers:l=!0,quoteFieldNamesWith:a=["",""]}={})=>{let p=n==="field",f=typeof o=="number"||typeof o=="boolean"||typeof o=="bigint"||Q(o,l),[s,m]=at(a),u=c=>`${s}${c}${m}`;switch(t){case"<":case"<=":case"=":case"!=":case">":case">=":return`${u(e)} ${t} ${p?u(M(o)):f?M(o):Ut(o,r)}`;case"contains":case"doesNotContain":return Ht(`$contains(${u(e)}, ${p?u(M(o)):Ut(o,r)})`,yo(t));case"beginsWith":case"doesNotBeginWith":return Ht(p?`$substring(${u(e)}, 0, $length(${u(M(o))})) = ${u(M(o))}`:`$contains(${u(e)}, /^${an(o)}/)`,yo(t));case"endsWith":case"doesNotEndWith":return Ht(p?`$substring(${u(e)}, $length(${u(e)}) - $length(${u(M(o))})) = ${u(M(o))}`:`$contains(${u(e)}, /${an(o)}$/)`,yo(t));case"null":return`${u(e)} = null`;case"notNull":return`${u(e)} != null`;case"in":case"notIn":{let c=V(o);return Ht(`${u(e)} in [${c.map(y=>p?`${u(M(y))}`:Q(y,l)?`${M(y)}`:Ut(y,r)).join(", ")}]`,yo(t))}case"between":case"notBetween":{let c=V(o);if(c.length>=2&&!rt(c[0])&&!rt(c[1])){let[y,R]=c,i=Q(y,!0)?W(y,{parseNumbers:!0}):NaN,d=Q(R,!0)?W(R,{parseNumbers:!0}):NaN,k=isNaN(i)?p?`${y}`:y:i,D=isNaN(d)?p?`${R}`:R:d;if(k===i&&D===d&&d<i){let h=d;D=i,k=h}let S=Q(y,l)&&Q(R,l),G=`${u(e)} >= ${p?u(y):S?k:Ut(k,r)} and ${u(e)} <= ${p?u(R):S?D:Ut(D,r)}`;return t==="between"?`(${G})`:Ht(G,!0)}else return""}}return""};var nl=e=>e.replace(/^(=)$/,"$1=").replace(/^notNull$/i,"!=").replace(/^null$/i,"=="),Jt=(e,t)=>/^(does)?not/i.test(e)?{"!":t}:t,Kt=({field:e,operator:t,value:o,valueSource:n},{parseNumbers:r}={})=>{let l=n==="field",a={var:e},p=f=>l?{var:`${f}`}:Q(f,r)?W(f,{parseNumbers:r}):f;switch(t){case"<":case"<=":case"=":case"!=":case">":case">=":return{[nl(t)]:[a,p(o)]};case"null":case"notNull":return{[`${t==="notNull"?"!":"="}=`]:[a,null]};case"in":case"notIn":{let f=V(o).map(p);return Jt(t,{in:[a,f]})}case"between":case"notBetween":{let f=V(o);if(f.length>=2&&Ee(f[0])&&Ee(f[1])){let[s,m]=f;if(!l&&Q(s,!0)&&Q(m,!0)){let c=W(s,{parseNumbers:!0}),y=W(m,{parseNumbers:!0});if(y<c){let R=y;m=c,s=R}else s=c,m=y}else l&&(s={var:s},m={var:m});return Jt(t,{"<=":[s,a,m]})}return!1}case"contains":case"doesNotContain":{let f={in:[p(o),a]};return Jt(t,f)}case"beginsWith":case"doesNotBeginWith":{let f={startsWith:[a,p(o)]};return Jt(t,f)}case"endsWith":case"doesNotEndWith":{let f={endsWith:[a,p(o)]};return Jt(t,f)}}return!1};var At=(e,t,o)=>{let{fieldData:n,format:r,getNextNamedParam:l,parseNumbers:a,paramPrefix:p,paramsKeepPrefix:f,numberedParams:s,quoteFieldNamesWith:m=["",""],valueProcessor:u=Ye}=t??{},{processedParams:c=[]}=o??{},y=r==="parameterized",R=[],i={},d=b=>y?{sql:b,params:R}:{sql:b,params:i},k=u(e,{parseNumbers:a,quoteFieldNamesWith:m,fieldData:n,format:r}),D=po(e.operator),S=D.toLowerCase();if((S==="in"||S==="not in"||S==="between"||S==="not between")&&!k)return d("");if(S==="is null"||S==="is not null")return d(`${m[0]}${e.field}${m[1]} ${D}`);if(e.valueSource==="field")return d(`${m[0]}${e.field}${m[1]} ${D} ${k}`.trim());if(S==="in"||S==="not in"){let b=V(e.value);if(y)return b.forEach(v=>R.push(Q(v,a)?W(v,{parseNumbers:a}):v)),d(`${m[0]}${e.field}${m[1]} ${D} (${b.map((v,w)=>s?`${p}${c.length+1+b.length-(b.length-w)}`:"?").join(", ")})`);let A=[];return b.forEach(v=>{let w=l(e.field);A.push(`${p}${w}`),i[`${f?p:""}${w}`]=Q(v,a)?W(v,{parseNumbers:a}):v}),d(`${m[0]}${e.field}${m[1]} ${D} (${A.join(", ")})`)}else if(S==="between"||S==="not between"){let b=V(e.value),[A,v]=b.slice(0,2).map($=>Q($,a)?W($,{parseNumbers:a}):$);if(y)return R.push(A),R.push(v),d(`${m[0]}${e.field}${m[1]} ${D} ${s?`${p}${c.length+1}`:"?"} and ${s?`${p}${c.length+2}`:"?"}`);let w=l(e.field),g=l(e.field);return i[`${f?p:""}${w}`]=A,i[`${f?p:""}${g}`]=v,d(`${m[0]}${e.field}${m[1]} ${D} ${p}${w} and ${p}${g}`)}let G=e.value;typeof e.value=="string"&&(Q(e.value,a)?G=W(e.value,{parseNumbers:a}):G=/^'.*'$/g.test(k)?k.replace(/(^'|'$)/g,""):k);let h="";return y?R.push(G):(h=l(e.field),i[`${f?p:""}${h}`]=G),d(`${m[0]}${e.field}${m[1]} ${D} ${y?s?`${p}${c.length+1}`:"?":`${p}${h}`}`.trim())};var bo=(e,t)=>{let{parseNumbers:o,escapeQuotes:n,quoteFieldNamesWith:r=["",""],quoteValuesWith:l="'",valueProcessor:a=Ye}=t??{},p=a(e,{parseNumbers:o,escapeQuotes:n,quoteFieldNamesWith:r,quoteValuesWith:l}),f=po(e.operator),s=f.toLowerCase();if((s==="in"||s==="not in"||s==="between"||s==="not between")&&!p)return"";let[m,u]=at(r);return`${m}${e.field}${u} ${f} ${p}`.trim()};var sn=require("immer");var zo=e=>ie(e)&&typeof e.valid=="boolean",fe=(e,t,o)=>{if(typeof t=="boolean")return t;if(zo(t))return t.valid;if(typeof o=="function"&&!P(e)){let n=o(e);if(typeof n=="boolean")return n;if(zo(n))return n.valid}return!0};function ll(e,t={}){let o="json",n=Ye,r=null,l=["",""],a=()=>!0,p=[],f={},s="",m=":",u=!1,c=!1,y=!1,R=wt,i=Et,d="'";if(typeof t=="string")o=t.toLowerCase(),o==="mongodb"?r=mt:o==="parameterized"?r=At:o==="parameterized_named"?r=At:o==="cel"?r=dt:o==="spel"?r=yt:o==="jsonlogic"?r=Kt:o==="elasticsearch"?r=jt:o==="jsonata"&&(r=_t);else{o=(t.format??"json").toLowerCase();let{valueProcessor:G=null,ruleProcessor:h=null}=t;typeof h=="function"&&(r=h),n=typeof G=="function"?(b,A)=>ln(G)?G(b.field,b.operator,b.value,b.valueSource):G(b,A):o==="mongodb"?r??mt:o==="cel"?r??dt:o==="spel"?r??yt:o==="jsonlogic"?r??Kt:o==="elasticsearch"?r??jt:o==="jsonata"?r??_t:Ye,l=at(t.quoteFieldNamesWith),a=t.validator??(()=>!0),p=qe(t.fields??[]),s=t.fallbackExpression??"",m=t.paramPrefix??":",u=!!t.paramsKeepPrefix,c=!!t.numberedParams,y=!!t.parseNumbers,R=t.placeholderFieldName??wt,i=t.placeholderOperatorName??Et,d=t.quoteValuesWith??"'"}if(s||(s=o==="mongodb"?'"$and":[{"$expr":true}]':o==="cel"||o==="spel"?"1 == 1":"(1 = 1)"),o==="json"||o==="json_without_ids"){let G=y?(0,sn.produce)(e,_o):e;return o==="json_without_ids"?JSON.stringify(G,(h,b)=>h==="id"||h==="path"?void 0:b):JSON.stringify(G,null,2)}if(typeof a=="function"){let G=a(e);if(typeof G=="boolean"){if(G===!1)return o==="parameterized"?{sql:s,params:[]}:o==="parameterized_named"?{sql:s,params:{}}:o==="mongodb"?`{${s}}`:o==="jsonlogic"?!1:o==="elasticsearch"?{}:s}else f=G}let k={},D=jo(p);D.forEach(G=>{typeof G.validator=="function"&&(k[G.value??G.name]=G.validator)});let S=G=>{let h,b;if(G.id&&(h=f[G.id]),D.length){let A=D.filter(v=>v.name===G.field);if(A.length){let v=A[0];typeof v.validator=="function"&&(b=v.validator)}}return[h,b]};if(o==="sql"){let G=(h,b)=>{if(!fe(h,f[h.id??""]))return b?s:"";let A=h.rules.map(v=>{if(typeof v=="string")return v;if(P(v))return G(v,h.rules.length===1);let[w,g]=S(v);if(!fe(v,w,g)||v.field===R||v.operator===i)return"";let $=(v.valueSource??"value")==="value",L=Ce(p,v.field);return typeof r=="function"?r(v,{parseNumbers:y,escapeQuotes:$,quoteFieldNamesWith:l,fieldData:L,format:o,quoteValuesWith:d}):bo(v,{parseNumbers:y,escapeQuotes:$,valueProcessor:n,quoteFieldNamesWith:l,fieldData:L,format:o,quoteValuesWith:d})});return A.length===0?s:`${h.not?"NOT ":""}(${A.filter(Boolean).join(_(h)?` ${h.combinator} `:" ")})`};return G(e,!0)}if(o==="parameterized"||o==="parameterized_named"){let G=o==="parameterized",h=[],b={},A=new Map,v=$=>{A.has($)||A.set($,new Set);let L=`${$}_${A.get($).size+1}`;return A.get($).add(L),L},w=$=>{let[L,J]=S($);if(!fe($,L,J)||$.field===R||$.operator===i)return"";let x=Ce(p,$.field),se=Object.fromEntries(Array.from(A.entries()).map(([T,Re])=>[T,Array.from(Re)])),z=(typeof r=="function"?r:At)($,{getNextNamedParam:v,fieldParamNames:se,parseNumbers:y,quoteFieldNamesWith:l,fieldData:x,format:o,paramPrefix:m,paramsKeepPrefix:u,numberedParams:c,fallbackExpression:s,valueProcessor:n,fields:p,placeholderFieldName:R,placeholderOperatorName:i,validator:a},{processedParams:h});if(!ie(z))return"";let{sql:Z,params:O}=z;return typeof Z!="string"||!Z?"":(o==="parameterized"&&Array.isArray(O)?h.push(...O):o==="parameterized_named"&&ie(O)&&(Object.assign(b,O),Object.keys(O).forEach(T=>A.get($.field)?.add(T))),Z)},g=($,L)=>{if(!fe($,f[$.id??""]))return L?s:"";let J=$.rules.map(x=>typeof x=="string"?x:P(x)?g(x,$.rules.length===1):w(x));return J.length===0?s:`${$.not?"NOT ":""}(${J.filter(Boolean).join(_($)?` ${$.combinator} `:" ")})`};return G?{sql:g(e,!0),params:h}:{sql:g(e,!0),params:b}}if(o==="mongodb"){let G=(A,v)=>{if(!fe(A,f[A.id??""]))return v?s:"";let w=`"$${A.combinator.toLowerCase()}"`,g=!1,$=A.rules.map(L=>{if(P(L)){let z=G(L);return z?(g=!0,/^\{.+\}$/.test(z)?z:`{${z}}`):""}let[J,x]=S(L);if(!fe(L,J,x)||L.field===R||L.operator===i)return"";let se=Ce(p,L.field);return(r??n)(L,{parseNumbers:y,fieldData:se,format:o})}).filter(Boolean);return $.length>0?$.length===1&&!g?$[0]:`${w}:[${$.join(",")}]`:s},h=_(e)?e:pt(e),b=G(h,!0);return/^\{.+\}$/.test(b)?b:`{${b}}`}if(o==="cel"){let G=(h,b)=>{if(!fe(h,f[h.id??""]))return b?s:"";let A=h.rules.map(g=>{if(typeof g=="string")return Ho[g];if(P(g))return G(g);let[$,L]=S(g);if(!fe(g,$,L)||g.field===R||g.operator===i)return"";let J=Ce(p,g.field);return(r??n)(g,{parseNumbers:y,escapeQuotes:(g.valueSource??"value")==="value",fieldData:J,format:o})}).filter(Boolean).join(_(h)?` ${Ho[h.combinator]} `:" "),[v,w]=h.not||!b?[`${h.not?"!":""}(`,")"]:["",""];return A?`${v}${A}${w}`:s};return G(e,!0)}if(o==="spel"){let G=(h,b)=>{if(!fe(h,f[h.id??""]))return b?s:"";let A=h.rules.map(g=>{if(typeof g=="string")return g;if(P(g))return G(g);let[$,L]=S(g);if(!fe(g,$,L)||g.field===R||g.operator===i)return"";let J=Ce(p,g.field);return(r??n)(g,{parseNumbers:y,escapeQuotes:(g.valueSource??"value")==="value",fieldData:J,format:o})}).filter(Boolean).join(_(h)?` ${h.combinator} `:" "),[v,w]=h.not||!b?[`${h.not?"!":""}(`,")"]:["",""];return A?`${v}${A}${w}`:s};return G(e,!0)}if(o==="jsonata"){let G=(h,b)=>{if(!fe(h,f[h.id??""]))return b?s:"";let A=h.rules.map(g=>{if(typeof g=="string")return g;if(P(g))return G(g);let[$,L]=S(g);if(!fe(g,$,L)||g.field===R||g.operator===i)return"";let J=Ce(p,g.field);return(r??n)(g,{parseNumbers:y,escapeQuotes:(g.valueSource??"value")==="value",fieldData:J,format:o,quoteFieldNamesWith:l})}).filter(Boolean).join(_(h)?` ${h.combinator} `:" "),[v,w]=h.not||!b?[`${h.not?"$not":""}(`,")"]:["",""];return A?`${v}${A}${w}`:s};return G(e,!0)}if(o==="jsonlogic"){let G=_(e)?e:pt(e),h=(b,A)=>{if(!fe(b,f[b.id??""]))return!1;let v=b.rules.map(g=>{if(P(g))return h(g);let[$,L]=S(g);if(!fe(g,$,L)||g.field===R||g.operator===i)return!1;let J=Ce(p,g.field);return(r??n)(g,{parseNumbers:y,fieldData:J,format:o})}).filter(Boolean);if(v.length===0)return!1;let w={[b.combinator]:v};return b.not?{"!":w}:w};return h(G,!0)}if(o==="elasticsearch"){let G=_(e)?e:pt(e),h=A=>{if(!fe(A,f[A.id??""]))return!1;let v=A.rules.map(w=>{if(P(w))return h(w);let[g,$]=S(w);if(!fe(w,g,$)||w.field===R||w.operator===i)return!1;let L=Ce(p,w.field);return(r??n)(w,{parseNumbers:y,fieldData:L,format:o})}).filter(Boolean);return v.length===0?!1:{bool:A.not?{must_not:A.combinator==="or"?{bool:{should:v}}:v}:{[A.combinator==="or"?"should":"must"]:v}}},b=h(G);return b===!1?{}:b}return""}var al={default:Ye,mongodb:mt,cel:dt,spel:yt},ho=e=>(t,o,n,r)=>al[e]({field:t,operator:o,value:n,valueSource:r},{parseNumbers:!1}),sl=ho("default"),il=ho("mongodb"),ul=ho("cel"),pl=ho("spel");var cl=dt,dl=mt,ml=yt;var ye=(e,t)=>{let o=t,n=0;for(;n<e.length&&o&&P(o);){let r=o.rules[e[n]];typeof r!="string"?o=r:o=null,n++}return o},X=e=>e.slice(0,e.length-1),Me=(e,t)=>e.length===t.length&&e.every((o,n)=>o===t[n]),fl=(e,t)=>e.length<t.length&&RegExp(`^${e.join("-")}`).test(t.join("-")),Xo=(e,t)=>{let o=[],n=X(e),r=X(t),l=0;for(;l<n.length&&l<r.length&&n[l]===r[l];)o.push(r[l]),l++;return o},bt=(e,t)=>{let o=!!t.disabled,n=t,r=0;for(;r<e.length&&!o&&P(n);){let l=n.rules[e[r]];ie(l)&&(P(l)||"field"in l&&l.field)&&(o=!!l.disabled,n=l),r++}return o};var Yo=e=>Me([],e.path)?"Query builder":`Rule group at path ${e.path.join("-")}`;var zt=globalThis.crypto,he=()=>"00-0-4-2-000".replace(/[^-]/g,e=>((Math.random()+~~e)*65536>>parseInt(e)).toString(16).padStart(4,"0"));if(zt){if(typeof zt.randomUUID=="function")he=()=>zt.randomUUID();else if(typeof zt.getRandomValues=="function"){let e="89ab",t=new Uint32Array(32);he=()=>{zt.getRandomValues(t);let o=(t[0]%16).toString(16);for(let n=1;n<32;n++)n===12?o=`${o}4`:n===16?o=`${o}${e[t[17]%4]}`:o=`${o}${(t[n]%16).toString(16)}`,(n===7||n===11||n===15||n===19)&&(o=`${o}-`);return o}}}var Xt=Ae(require("react"));var yl=e=>{let t=n=>{let r=Ct(e);return Xt.createElement(Le.Provider,{value:r},n.children)},o=n=>{let r=Ct(n);return Xt.createElement(Le.Provider,{value:r},n.children)};return n=>Xt.createElement(t,null,Xt.createElement(o,{...n},n.children))};var Yt=e=>{let t=typeof e=="boolean"?e:typeof e=="object"&&e!==null?e.valid:null;return typeof t=="boolean"?t?E.valid:E.invalid:""};var bl=["value"],hl={name:"name",value:"name",valueSources:null,label:"label"},Zo=(e,t,o)=>{let n=e?ge(e):hl;if(n.valueSources)return typeof n.valueSources=="function"?n.valueSources(t):n.valueSources;if(o){let r=o(n.value,t,{fieldData:ge(n)});if(r)return r}return bl};var er=Ae(require("clsx")),tr=(...e)=>{let t=o=>(0,er.default)(e.map(n=>(0,er.default)(n?.[o])));return{queryBuilder:t("queryBuilder"),ruleGroup:t("ruleGroup"),header:t("header"),body:t("body"),combinators:t("combinators"),addRule:t("addRule"),addGroup:t("addGroup"),cloneRule:t("cloneRule"),cloneGroup:t("cloneGroup"),removeGroup:t("removeGroup"),rule:t("rule"),fields:t("fields"),operators:t("operators"),value:t("value"),removeRule:t("removeRule"),notToggle:t("notToggle"),shiftActions:t("shiftActions"),dragHandle:t("dragHandle"),lockRule:t("lockRule"),lockGroup:t("lockGroup"),valueSource:t("valueSource"),actionElement:t("actionElement"),valueSelector:t("valueSelector")}};var un=require("immer");var Zt=Object.keys,or=Object.entries;var Rl=(e,...t)=>(0,un.produce)(e,o=>{for(let n of t)n&&Zt(n).forEach(r=>{o[r]?Object.assign(o[r],n[r]):Object.assign(o,{[r]:n[r]})})}),ue=(e,t,o)=>{let n=or(t).map(([r,[l,a]])=>[r,l??a??(o?Bt:{})[e]?.[r]]).filter(r=>!!r[1]);return n.length>0?{[e]:Object.fromEntries(n)}:void 0};var rr=require("immer");var nr=(e,{idGenerator:t=he}={})=>(0,rr.produce)(e,o=>{o.id||(o.id=t())}),eo=(e,{idGenerator:t=he}={})=>(0,rr.produce)(e,o=>{o.id||(o.id=t()),o.rules=o.rules.map(n=>typeof n=="string"?n:P(n)?eo(n,{idGenerator:t}):nr(n,{idGenerator:t}))}),lr=(e,{idGenerator:t=he}={})=>P(e)?eo(e,{idGenerator:t}):nr(e,{idGenerator:t});var $t=require("immer");var ar=(e,{idGenerator:t=he}={})=>JSON.parse(JSON.stringify({...e,id:t()})),Tt=(e,{idGenerator:t=he}={})=>{if(!ie(e))return e;if(!P(e))return JSON.parse(JSON.stringify({...e,id:t()}));if(_(e)){let n=e.rules.map(r=>P(r)?Tt(r,{idGenerator:t}):ar(r,{idGenerator:t}));return{...e,id:t(),rules:n}}let o=e.rules.map(n=>typeof n=="string"?n:P(n)?Tt(n,{idGenerator:t}):ar(n,{idGenerator:t}));return{...e,id:t(),rules:o}};var Ro=(e,t,o,{combinators:n=Ie,combinatorPreceding:r,idGenerator:l=he}={})=>(0,$t.produce)(e,a=>{let p=ye(o,a);if(!(!p||!P(p))){if(Ve(p)&&p.rules.length>0){let f=p.rules[p.rules.length-2];p.rules.push(r??(typeof f=="string"?f:me(n)))}p.rules.push(lr(t,{idGenerator:l}))}}),sr=(e,t,o,n,{resetOnFieldChange:r=!0,resetOnOperatorChange:l=!1,getRuleDefaultOperator:a=()=>"=",getValueSources:p=()=>["value"],getRuleDefaultValue:f=()=>""}={})=>(0,$t.produce)(e,s=>{if(t==="combinator"&&!_(s)){let i=ye(X(n),s).rules;n[n.length-1]%2===1&&(i[n[n.length-1]]=o);return}let m=ye(n,s);if(!m)return;let u=P(m);if(m[t]===o||(t!=="valueSource"&&(m[t]=o),u))return;let c=!1,y=!1;r&&t==="field"&&(m.operator=a(o),c=!0,y=!0),l&&t==="operator"&&(c=!0,y=!0);let R=p(m.field,m.operator)[0];(c&&m.valueSource&&R!==m.valueSource||t==="valueSource"&&o!==m.valueSource)&&(y=!!m.valueSource||!m.valueSource&&o!==R,m.valueSource=c?R:o),y&&(m.value=f(m))}),ir=(e,t)=>t.length===0||!_(e)&&!ye(t,e)?e:(0,$t.produce)(e,o=>{let n=t[t.length-1],r=ye(X(t),o);if(r&&P(r))if(!_(r)&&r.rules.length>1){let l=n===0?0:n-1;r.rules.splice(l,2)}else r.rules.splice(n,1)}),gl=(e,t,o)=>{if(Array.isArray(o))return o;let n=Ve(e);if(o==="up"){if(Me(t,[0]))return t;if(t.at(-1)===0){let r=X(t);return[...X(r),Math.max(0,r.at(-1)-(n?1:0))]}else{let r=[...X(t),Math.max(0,t.at(-1)-(n?2:1))],l=ye(r,e);return P(l)?[...r,l.rules.length]:[...X(t),Math.max(0,t.at(-1)-(n?3:1))]}}else if(o==="down"){if(Me([e.rules.length-1],t))return t;if(t.at(-1)===ye(X(t),e).rules.length-1){let r=X(t);return[...X(r),r.at(-1)+1]}else{let r=[...X(t),t.at(-1)+(n?2:1)],l=ye(r,e);return P(l)?[...r,0]:[...X(t),t.at(-1)+(n?3:2)]}}return t},ur=(e,t,o,{clone:n=!1,combinators:r=Ie,idGenerator:l=he}={})=>{let a=gl(e,t,o);if(t.length===0||Me(t,a)||!ye(X(a),e))return e;let p=ye(t,e);if(!p)return e;let f=n?Tt(p,{idGenerator:l}):p;return(0,$t.produce)(e,s=>{let m=Ve(s),u=ye(X(t),s),c=t[t.length-1],y=m&&c>0?u.rules[c-1]:null,R=m&&c<u.rules.length-1?u.rules[c+1]:null;if(!n){let h=m?Math.max(0,c-1):c,b=m?2:1;u.rules.splice(h,b)}let i=[...a],d=Xo(t,a);!n&&t.length===d.length+1&&a[d.length]>t[d.length]&&(i[d.length]-=m?2:1);let k=X(i),D=ye(k,s),S=i[i.length-1],G=(...h)=>D.rules.splice(S,0,...h);if(D.rules.length===0||!m)G(f);else if(S===0)if(c===0&&R)G(f,R);else{let h=D.rules[1]??y??me(r);G(f,h)}else if(y)G(y,f);else{let h=D.rules[S-2]??R??me(r);G(h,f)}})},Gl=(e,t,o,{combinators:n=Ie,combinatorPreceding:r,combinatorSucceeding:l,idGenerator:a=he,replace:p=!1}={})=>(0,$t.produce)(e,f=>{let s=ye(X(o),f);if(!s||!P(s))return;let m=Tt(t,{idGenerator:a}),u=Ve(f),c=o[o.length-1],y=(R,...i)=>s.rules.splice(R,p?i.length:0,...i);if(s.rules.length===0||!u)y(c,m);else if(p&&u)y(c+c%2,m);else if(c===0)if(m.path?.at(-1)===0&&l)y(c,m,l);else{let R=s.rules[1]??r??me(n);y(c,m,R)}else{let R=c%2===0?c-1:c;if(r)y(R,r,m);else{let i=s.rules[R-2]??l??me(n);y(R,i,m)}}});var go=Ae(require("react"));var pr=e=>qt(e)?e.map(t=>go.createElement("optgroup",{key:t.label,label:t.label},t.options.map(o=>go.createElement("option",{key:o.name,value:o.name,disabled:o.disabled},o.label)))):Array.isArray(e)?e.map(t=>go.createElement("option",{key:t.name,value:t.name,disabled:t.disabled},t.label)):null;var cn=require("immer");var pn=(e,t,o)=>(0,cn.produce)(e,n=>{for(let[r,l]of Object.entries(t))l===!1?delete n[r]:l&&r!==l&&r in n&&(n[l]=n[r],o&&delete n[r])});function xl(e,t={}){let{ruleProcessor:o=m=>m,ruleGroupProcessor:n=m=>m,propertyMap:r={},combinatorMap:l={},operatorMap:a={},omitPath:p=!1,deleteRemappedProperties:f=!0}=t,s=m=>({...n(pn({...m,..._(m)?{combinator:l[m.combinator]??m.combinator}:{}},r,f)),...r.rules===!1?null:{[r.rules??"rules"]:m.rules.map((u,c)=>{let y=p?null:{path:[...m.path,c]};return typeof u=="string"?l[u]??u:P(u)?s({...u,...y}):o(pn({...u,...y,..."operator"in u?{operator:a[u.operator]??u.operator}:{}},r,f))})}});return s({...e,...p?null:{path:[]}})}var vl=(e,t)=>e===!1?!1:e?!0:t!==!1,Ol=(e,t)=>e?!0:e===!1?!1:!!t,dn=(e,t,o)=>e?vl(t,o):Ol(t,o),to=(e,t,o)=>dn(e,t,o),Al=(e,t,o)=>typeof t<"u"&&t!=null?t:typeof o<"u"&&o!=null?o:e;var Go=()=>null,Cl=(0,We.forwardRef)(Go),Nt={},Ct=({finalize:e,...t})=>{let o=(0,We.useContext)(Le),n=to(!1,t.debugMode,o.debugMode),r=e?n:t.debugMode??o.debugMode,l=to(!0,t.enableMountQueryChange,o.enableMountQueryChange),a=e?l:t.enableMountQueryChange??o.enableMountQueryChange,p=to(!1,t.enableDragAndDrop,o.enableDragAndDrop)&&o.enableDragAndDrop!==!1,f=e?p:t.enableDragAndDrop??o.enableDragAndDrop,s=(0,We.useMemo)(()=>tr(e?Object.assign({},Fo):Nt,o.controlClassnames,t.controlClassnames),[o.controlClassnames,t.controlClassnames,e]),m=(0,We.useMemo)(()=>({actionElement:s.actionElement,addGroup:s.addGroup,addRule:s.addRule,body:s.body,cloneGroup:s.cloneGroup,cloneRule:s.cloneRule,combinators:s.combinators,dragHandle:s.dragHandle,fields:s.fields,header:s.header,lockGroup:s.lockGroup,lockRule:s.lockRule,notToggle:s.notToggle,operators:s.operators,queryBuilder:s.queryBuilder,removeGroup:s.removeGroup,removeRule:s.removeRule,rule:s.rule,ruleGroup:s.ruleGroup,shiftActions:s.shiftActions,value:s.value,valueSelector:s.valueSelector,valueSource:s.valueSource}),[s.actionElement,s.addGroup,s.addRule,s.body,s.cloneGroup,s.cloneRule,s.combinators,s.dragHandle,s.fields,s.header,s.lockGroup,s.lockRule,s.notToggle,s.operators,s.queryBuilder,s.removeGroup,s.removeRule,s.rule,s.ruleGroup,s.shiftActions,s.value,s.valueSelector,s.valueSource]),u=o.controlElements??Nt,c=t.controlElements??Nt,y=(0,We.useCallback)((D,S,G)=>{let h=D==="dragHandle"?Cl:Go,b=(D.endsWith("Action")&&c.actionElement?c.actionElement:void 0)??(D.endsWith("Selector")&&c.valueSelector?c.valueSelector:void 0),A=(D.endsWith("Action")&&u.actionElement?u.actionElement:void 0)??(D.endsWith("Selector")&&u.valueSelector?u.valueSelector:void 0),v=S===null?h:S??(e?b:void 0)??(G===null?h:G??(e?A:void 0));return v?{[D]:v}:e?{[D]:St[D]}:Nt},[u.actionElement,u.valueSelector,e,c.actionElement,c.valueSelector]),R=(0,We.useMemo)(()=>Object.assign({},y("addGroupAction",c.addGroupAction,u.addGroupAction),y("addRuleAction",c.addRuleAction,u.addRuleAction),y("cloneGroupAction",c.cloneGroupAction,u.cloneGroupAction),y("cloneRuleAction",c.cloneRuleAction,u.cloneRuleAction),y("combinatorSelector",c.combinatorSelector,u.combinatorSelector),y("dragHandle",c.dragHandle,u.dragHandle),y("fieldSelector",c.fieldSelector,u.fieldSelector),y("inlineCombinator",c.inlineCombinator,u.inlineCombinator),y("lockGroupAction",c.lockGroupAction,u.lockGroupAction),y("lockRuleAction",c.lockRuleAction,u.lockRuleAction),y("notToggle",c.notToggle,u.notToggle),y("operatorSelector",c.operatorSelector,u.operatorSelector),y("removeGroupAction",c.removeGroupAction,u.removeGroupAction),y("removeRuleAction",c.removeRuleAction,u.removeRuleAction),y("shiftActions",c.shiftActions,u.shiftActions),{valueEditor:c.valueEditor===null?Go:c.valueEditor??(u.valueEditor===null?Go:u.valueEditor)??St.valueEditor},y("valueSourceSelector",c.valueSourceSelector,u.valueSourceSelector),y("rule",c.rule,u.rule),y("ruleGroup",c.ruleGroup,u.ruleGroup),{actionElement:c.actionElement??u.actionElement??(e?St.actionElement:void 0)},{valueSelector:c.valueSelector??u.valueSelector??(e?St.valueSelector:void 0)}),[u.actionElement,u.addGroupAction,u.addRuleAction,u.cloneGroupAction,u.cloneRuleAction,u.combinatorSelector,u.dragHandle,u.fieldSelector,u.inlineCombinator,u.lockGroupAction,u.lockRuleAction,u.notToggle,u.operatorSelector,u.removeGroupAction,u.removeRuleAction,u.rule,u.ruleGroup,u.shiftActions,u.valueEditor,u.valueSelector,u.valueSourceSelector,y,e,c.actionElement,c.addGroupAction,c.addRuleAction,c.cloneGroupAction,c.cloneRuleAction,c.combinatorSelector,c.dragHandle,c.fieldSelector,c.inlineCombinator,c.lockGroupAction,c.lockRuleAction,c.notToggle,c.operatorSelector,c.removeGroupAction,c.removeRuleAction,c.rule,c.ruleGroup,c.shiftActions,c.valueEditor,c.valueSelector,c.valueSourceSelector]),i=t.translations??Nt,d=o.translations??Nt,k=(0,We.useMemo)(()=>Object.assign(e?Object.assign({},Bt):{},ue("addGroup",{label:[i.addGroup?.label,d.addGroup?.label],title:[i.addGroup?.title,d.addGroup?.title]},e),ue("addRule",{label:[i.addRule?.label,d.addRule?.label],title:[i.addRule?.title,d.addRule?.title]},e),ue("cloneRule",{label:[i.cloneRule?.label,d.cloneRule?.label],title:[i.cloneRule?.title,d.cloneRule?.title]},e),ue("cloneRuleGroup",{label:[i.cloneRuleGroup?.label,d.cloneRuleGroup?.label],title:[i.cloneRuleGroup?.title,d.cloneRuleGroup?.title]},e),ue("combinators",{title:[i.combinators?.title,d.combinators?.title]},e),ue("dragHandle",{label:[i.dragHandle?.label,d.dragHandle?.label],title:[i.dragHandle?.title,d.dragHandle?.title]},e),ue("fields",{placeholderGroupLabel:[i.fields?.placeholderGroupLabel,d.fields?.placeholderGroupLabel],placeholderLabel:[i.fields?.placeholderLabel,d.fields?.placeholderLabel],placeholderName:[i.fields?.placeholderName,d.fields?.placeholderName],title:[i.fields?.title,d.fields?.title]},e),ue("lockGroup",{label:[i.lockGroup?.label,d.lockGroup?.label],title:[i.lockGroup?.title,d.lockGroup?.title]},e),ue("lockGroupDisabled",{label:[i.lockGroupDisabled?.label,d.lockGroupDisabled?.label],title:[i.lockGroupDisabled?.title,d.lockGroupDisabled?.title]},e),ue("lockRule",{label:[i.lockRule?.label,d.lockRule?.label],title:[i.lockRule?.title,d.lockRule?.title]},e),ue("lockRuleDisabled",{label:[i.lockRuleDisabled?.label,d.lockRuleDisabled?.label],title:[i.lockRuleDisabled?.title,d.lockRuleDisabled?.title]},e),ue("notToggle",{label:[i.notToggle?.label,d.notToggle?.label],title:[i.notToggle?.title,d.notToggle?.title]},e),ue("operators",{placeholderGroupLabel:[i.operators?.placeholderGroupLabel,d.operators?.placeholderGroupLabel],placeholderLabel:[i.operators?.placeholderLabel,d.operators?.placeholderLabel],placeholderName:[i.operators?.placeholderName,d.operators?.placeholderName],title:[i.operators?.title,d.operators?.title]},e),ue("removeGroup",{label:[i.removeGroup?.label,d.removeGroup?.label],title:[i.removeGroup?.title,d.removeGroup?.title]},e),ue("removeRule",{label:[i.removeRule?.label,d.removeRule?.label],title:[i.removeRule?.title,d.removeRule?.title]},e),ue("shiftActionDown",{label:[i.shiftActionDown?.label,d.shiftActionDown?.label],title:[i.shiftActionDown?.title,d.shiftActionDown?.title]},e),ue("shiftActionUp",{label:[i.shiftActionUp?.label,d.shiftActionUp?.label],title:[i.shiftActionUp?.title,d.shiftActionUp?.title]},e),ue("value",{title:[i.value?.title,d.value?.title]},e),ue("valueSourceSelector",{title:[i.valueSourceSelector?.title,d.valueSourceSelector?.title]},e)),[i.addGroup?.label,i.addGroup?.title,i.addRule?.label,i.addRule?.title,i.cloneRule?.label,i.cloneRule?.title,i.cloneRuleGroup?.label,i.cloneRuleGroup?.title,i.combinators?.title,i.dragHandle?.label,i.dragHandle?.title,i.fields?.placeholderGroupLabel,i.fields?.placeholderLabel,i.fields?.placeholderName,i.fields?.title,i.lockGroup?.label,i.lockGroup?.title,i.lockGroupDisabled?.label,i.lockGroupDisabled?.title,i.lockRule?.label,i.lockRule?.title,i.lockRuleDisabled?.label,i.lockRuleDisabled?.title,i.notToggle?.label,i.notToggle?.title,i.operators?.placeholderGroupLabel,i.operators?.placeholderLabel,i.operators?.placeholderName,i.operators?.title,i.removeGroup?.label,i.removeGroup?.title,i.removeRule?.label,i.removeRule?.title,i.shiftActionDown?.label,i.shiftActionDown?.title,i.shiftActionUp?.label,i.shiftActionUp?.title,i.value?.title,i.valueSourceSelector?.title,e,d.addGroup?.label,d.addGroup?.title,d.addRule?.label,d.addRule?.title,d.cloneRule?.label,d.cloneRule?.title,d.cloneRuleGroup?.label,d.cloneRuleGroup?.title,d.combinators?.title,d.dragHandle?.label,d.dragHandle?.title,d.fields?.placeholderGroupLabel,d.fields?.placeholderLabel,d.fields?.placeholderName,d.fields?.title,d.lockGroup?.label,d.lockGroup?.title,d.lockGroupDisabled?.label,d.lockGroupDisabled?.title,d.lockRule?.label,d.lockRule?.title,d.lockRuleDisabled?.label,d.lockRuleDisabled?.title,d.notToggle?.label,d.notToggle?.title,d.operators?.placeholderGroupLabel,d.operators?.placeholderLabel,d.operators?.placeholderName,d.operators?.title,d.removeGroup?.label,d.removeGroup?.title,d.removeRule?.label,d.removeRule?.title,d.shiftActionDown?.label,d.shiftActionDown?.title,d.shiftActionUp?.label,d.shiftActionUp?.title,d.value?.title,d.valueSourceSelector?.title]);return{controlClassnames:m,controlElements:R,debugMode:r,enableDragAndDrop:f,enableMountQueryChange:a,translations:k,initialQuery:t.initialQuery,qbId:t.qbId}};var cr=require("clsx"),U=require("react");var Tl={},$l={},Nl=[],Sl={},Pl=()=>null,mn=()=>"",oo=()=>!0,Fl=(...e)=>{console.log(...e)};function dr(e,t){let{query:o,defaultQuery:n,getValueEditorSeparator:r=Pl,getRuleClassname:l=mn,getRuleGroupClassname:a=mn,onAddRule:p=oo,onAddGroup:f=oo,onMoveRule:s=oo,onMoveGroup:m=oo,onRemove:u=oo,onQueryChange:c,showCombinatorsBetweenRules:y=!1,showNotToggle:R=!1,showShiftActions:i=!1,showCloneButtons:d=!1,showLockButtons:k=!1,resetOnFieldChange:D=!0,resetOnOperatorChange:S=!1,autoSelectField:G=!0,autoSelectOperator:h=!0,addRuleToNewGroups:b=!1,listsAsArrays:A=!1,parseNumbers:v=!1,disabled:w=!1,validator:g,onLog:$=Fl,idGenerator:L,accessibleDescriptionGenerator:J=Yo}=e,{qbId:x,rqbContext:se,fields:z,fieldMap:Z,combinators:O,getOperatorsMain:T,getRuleDefaultOperator:Re,getValueEditorTypeMain:He,getValueSourcesMain:Pe,getValuesMain:ke,getRuleDefaultValue:_e,getInputTypeMain:Je,createRule:Ke,createRuleGroup:q}=t,{controlClassnames:Te,controlElements:ze,debugMode:N,enableDragAndDrop:C,enableMountQueryChange:F,translations:pe}=se,ce=!!y,Ze=!!R,Fe=!!i,gt=!!d,nt=!!k,ee=!!D,te=!!S,ve=!!G,Gt=!!h,Ge=!!b,et=!!A,oe=(0,U.useCallback)((...B)=>{N&&$(...B)},[N,$]);Lo({defaultQuery:n,queryProp:o});let De=Jr(),xt=Ot(),Oo=(0,U.useMemo)(()=>ot(x),[x]),Ao=Qo(Oo),Ar=(0,U.useCallback)(()=>Oo(De.getState()),[De,Oo]),Nn=(0,U.useMemo)(()=>q(),[q]),Co=o??Ao??n??Nn,Oe=Co.id?Co:eo(Co,{idGenerator:L}),[Cr]=(0,U.useState)(Oe),Sn=(0,U.useMemo)(()=>({...se,initialQuery:Cr}),[se,Cr]);(0,U.useEffect)(()=>{o&&!Object.is(o,Ao)&&xt(io({payload:{qbId:x,query:o},onQueryChange:void 0}))},[o,x,Ao,xt]);let Ft=(0,U.useMemo)(()=>Ve(Oe),[Oe]),To=!!e.independentCombinators&&!Ft;it("independentCombinators",To||!To&&(e.independentCombinators??"not present")!=="not present",To?"invalid":"unnecessary");let Tr=(0,U.useRef)(!1);(0,U.useEffect)(()=>{Tr.current||(Tr.current=!0,xt(io({payload:{qbId:x,query:Oe},onQueryChange:F&&typeof c=="function"?c:void 0})))},[F,c,x,xt,Oe]);let we=(0,U.useCallback)(B=>{xt(io({payload:{qbId:x,query:B},onQueryChange:c}))},[c,x,xt]),no=(0,U.useMemo)(()=>Array.isArray(w)&&w||Nl,[w]),$e=w===!0,Pn=(0,U.useMemo)(()=>Oe.disabled||no.some(B=>B.length===0),[no,Oe.disabled]),$r=(0,U.useCallback)((B,K,re)=>{let H=ot(x)(De.getState());if(!H)return;if(bt(K,H)||$e){oe({qbId:x,type:be.parentPathDisabled,rule:B,parentPath:K,query:H});return}let ne=p(B,K,H,re);if(!ne){oe({qbId:x,type:be.onAddRuleFalse,rule:B,parentPath:K,query:H});return}let Be=ne===!0?B:ne,tt=Ro(H,Be,K,{combinators:O,combinatorPreceding:Be.combinatorPreceding??void 0});oe({qbId:x,type:be.add,query:H,newQuery:tt,newRule:Be,parentPath:K}),we(tt)},[x,De,$e,p,O,we,oe]),Nr=(0,U.useCallback)((B,K,re)=>{let H=ot(x)(De.getState());if(!H)return;if(bt(K,H)||$e){oe({qbId:x,type:be.parentPathDisabled,ruleGroup:B,parentPath:K,query:H});return}let ne=f(B,K,H,re);if(!ne){oe({qbId:x,type:be.onAddGroupFalse,ruleGroup:B,parentPath:K,query:H});return}let Be=ne===!0?B:ne,tt=Ro(H,Be,K,{combinators:O,combinatorPreceding:Be.combinatorPreceding??void 0});oe({qbId:x,type:be.add,query:H,newQuery:tt,newGroup:Be,parentPath:K}),we(tt)},[x,De,$e,f,O,oe,we]),Sr=(0,U.useCallback)((B,K,re)=>{let H=ot(x)(De.getState());if(!H)return;if(bt(re,H)&&B!=="disabled"||$e){oe({qbId:x,type:be.pathDisabled,path:re,prop:B,value:K,query:H});return}let ne=sr(H,B,K,re,{resetOnFieldChange:ee,resetOnOperatorChange:te,getRuleDefaultOperator:Re,getValueSources:Pe,getRuleDefaultValue:_e});oe({qbId:x,type:be.update,query:H,newQuery:ne,prop:B,value:K,path:re}),we(ne)},[x,De,$e,ee,te,Re,Pe,_e,oe,we]),$o=(0,U.useCallback)((B,K)=>{let re=ot(x)(De.getState());if(!re)return;if(bt(B,re)||$e){oe({qbId:x,type:be.pathDisabled,path:B,query:re});return}let H=ye(B,re);if(H)if(u(H,B,re,K)){let ne=ir(re,B);oe({qbId:x,type:be.remove,query:re,newQuery:ne,path:B,ruleOrGroup:H}),we(ne)}else oe({qbId:x,type:be.onRemoveFalse,ruleOrGroup:H,path:B,query:re})},[x,De,$e,oe,u,we]),Pr=(0,U.useCallback)((B,K,re,H)=>{let ne=ot(x)(De.getState());if(!ne)return;if(bt(B,ne)||$e){oe({qbId:x,type:be.pathDisabled,oldPath:B,newPath:K,query:ne});return}let Be=ur(ne,B,K,{clone:re,combinators:O}),tt=ye(B,ne),Dr=P(tt),No=(Dr?m:s)(tt,B,K,ne,Be,{clone:re,combinators:O},H);if(!No){oe({qbId:x,type:Dr?be.onMoveGroupFalse:be.onMoveRuleFalse,ruleOrGroup:tt,oldPath:B,newPath:K,clone:re,query:ne,nextQuery:Be});return}let wr=P(No)?No:Be;oe({qbId:x,type:be.move,query:ne,newQuery:wr,oldPath:B,newPath:K,clone:re}),we(wr)},[x,De,$e,O,m,s,oe,we]),{validationResult:Dt,validationMap:Fr}=(0,U.useMemo)(()=>{let B=typeof g=="function"&&Oe?g(Oe):Tl;return{validationResult:B,validationMap:typeof B=="boolean"?$l:B}},[Oe,g]),Fn=(0,U.useMemo)(()=>C?"enabled":"disabled",[C]),Dn=(0,U.useMemo)(()=>Ft||ce?"enabled":"disabled",[Ft,ce]),wn=(0,U.useMemo)(()=>typeof Oe.combinator=="string"?{combinator:Oe.combinator}:Sl,[Oe.combinator]),En=(0,U.useMemo)(()=>(0,cr.clsx)(E.queryBuilder,(0,cr.clsx)(Te.queryBuilder),{[E.disabled]:$e,[E.valid]:typeof Dt=="boolean"&&Dt,[E.invalid]:typeof Dt=="boolean"&&!Dt}),[Te.queryBuilder,$e,Dt]),kn=(0,U.useMemo)(()=>({addRuleToNewGroups:Ge,accessibleDescriptionGenerator:J,autoSelectField:ve,autoSelectOperator:Gt,classNames:Te,combinators:O,controls:ze,createRule:Ke,createRuleGroup:q,disabledPaths:no,enableDragAndDrop:C,fieldMap:Z,fields:z,dispatchQuery:we,getQuery:Ar,getInputType:Je,getOperators:T,getRuleClassname:l,getRuleGroupClassname:a,getValueEditorSeparator:r,getValueEditorType:He,getValues:ke,getValueSources:Pe,independentCombinators:Ft,listsAsArrays:et,parseNumbers:v,qbId:x,showCloneButtons:gt,showCombinatorsBetweenRules:ce,showLockButtons:nt,showNotToggle:Ze,showShiftActions:Fe,validationMap:Fr}),[Ge,J,ve,Gt,O,Te,ze,Ke,q,no,C,Z,z,we,Ar,Je,T,l,a,He,ke,Pe,r,Ft,et,v,x,gt,ce,nt,Ze,Fe,Fr]);return{actions:(0,U.useMemo)(()=>({moveRule:Pr,onGroupAdd:Nr,onGroupRemove:$o,onPropChange:Sr,onRuleAdd:$r,onRuleRemove:$o}),[Pr,Nr,Sr,$r,$o]),rootGroup:Oe,rootGroupDisabled:Pn,queryDisabled:$e,rqbContext:Sn,schema:kn,translations:pe,wrapperClassName:En,dndEnabledAttr:Fn,inlineCombinatorsAttr:Dn,combinatorPropObject:wn}}var de=require("react");var fn=(e,t,o)=>{let n=me(e);if(t.operator==="between"||t.operator==="notBetween"){let r=[n,n];return o?r:ut(r.map(l=>l??""),",")}return n},mr=e=>{let[t]=(0,de.useState)(he),{fields:o,baseField:n,operators:r,baseOperator:l,combinators:a=Ie,baseCombinator:p,translations:f,enableMountQueryChange:s=!0,controlClassnames:m,controlElements:u,getDefaultField:c,getDefaultOperator:y,getDefaultValue:R,getOperators:i,getValueEditorType:d,getValueSources:k,getInputType:D,getValues:S,autoSelectField:G=!0,autoSelectOperator:h=!0,addRuleToNewGroups:b=!1,enableDragAndDrop:A,listsAsArrays:v=!1,debugMode:w=!1,idGenerator:g=he}=e,$=r??Po,[L]=(0,de.useState)(e.query??e.defaultQuery),J=Ct({controlClassnames:m,controlElements:u,debugMode:w,enableDragAndDrop:A,enableMountQueryChange:s,translations:f,initialQuery:L,qbId:t,finalize:!0}),{translations:x}=J,se=(0,de.useMemo)(()=>({id:x.fields.placeholderName,name:x.fields.placeholderName,value:x.fields.placeholderName,label:x.fields.placeholderLabel}),[x.fields.placeholderLabel,x.fields.placeholderName]),z=(0,de.useMemo)(()=>o??[se],[se,o]),Z=(0,de.useMemo)(()=>{let N=Array.isArray(z)?qe(z,n):Zt(uo(z,n)).map(C=>({...z[C],name:C,value:C})).sort((C,F)=>C.label.localeCompare(F.label));return Ne(N)?G?Vt(N):Vt([{label:x.fields.placeholderGroupLabel,options:[se]},...N]):G?lt(N):lt([se,...N])},[G,n,se,z,x.fields.placeholderGroupLabel]),O=(0,de.useMemo)(()=>{if(!Array.isArray(z)){let C=uo(z,n);return G?C:{...C,[x.fields.placeholderName]:se}}let N={};return Ne(Z)?Z.forEach(C=>C.options.forEach(F=>{N[F.value??F.name]=ge(F,n)})):Z.forEach(C=>{N[C.value??C.name]=ge(C,n)}),N},[G,n,se,Z,z,x.fields.placeholderName]),T=(0,de.useMemo)(()=>qe(a,p),[p,a]),Re=(0,de.useMemo)(()=>({id:x.operators.placeholderName,name:x.operators.placeholderName,value:x.operators.placeholderName,label:x.operators.placeholderLabel}),[x.operators.placeholderLabel,x.operators.placeholderName]),He=(0,de.useCallback)((N,{fieldData:C})=>{let F=qe($,l);if(C?.operators)F=qe(C.operators,l);else if(i){let pe=i(N,{fieldData:C});pe&&(F=qe(pe,l))}return h||(Ne(F)?F=[{label:x.operators.placeholderGroupLabel,options:[Re]},...F]:F=[Re,...F]),Wo(F)},[h,l,Re,i,$,x.operators.placeholderGroupLabel]),Pe=(0,de.useCallback)(N=>{let C=O[N];if(C?.defaultOperator)return C.defaultOperator;if(y)return typeof y=="function"?y(N,{fieldData:C}):y;let F=He(N,{fieldData:C})??[];return me(F)??""},[O,y,He]),ke=(0,de.useCallback)((N,C,{fieldData:F})=>F.valueEditorType?typeof F.valueEditorType=="function"?F.valueEditorType(C):F.valueEditorType:d?.(N,C,{fieldData:F})??"text",[d]),_e=(0,de.useCallback)((N,C)=>Zo(O[N],C,k),[O,k]),Je=(0,de.useCallback)((N,C,{fieldData:F})=>F?.values?qe(F.values):S?qe(S(N,C,{fieldData:F})):[],[S]),Ke=(0,de.useCallback)(N=>{let C=O[N.field]??{};if(C?.defaultValue!==void 0&&C.defaultValue!==null)return C.defaultValue;if(R)return R(N,{fieldData:C});let F="",pe=Je(N.field,N.operator,{fieldData:C});if(N.valueSource==="field"){let ce=Mt(C,Z,N.operator);ce.length>0?F=fn(ce,N,v):F=""}else if(pe.length){let ce=ke(N.field,N.operator,{fieldData:C});ce==="multiselect"?F=v?[]:"":(ce==="select"||ce==="radio")&&(F=fn(pe,N,v))}else ke(N.field,N.operator,{fieldData:C})==="checkbox"&&(F=!1);return F},[O,Z,R,ke,Je,v]),q=(0,de.useCallback)((N,C,{fieldData:F})=>{if(D){let pe=D(N,C,{fieldData:F});if(pe)return pe}return"text"},[D]),Te=(0,de.useCallback)(()=>{let N="",C=Z;if(C?.length>0&&C[0]){let Fe=me(C);Fe&&(N=Fe)}if(c)if(typeof c=="function"){let Fe=c(C);Fe&&(N=Fe)}else N=c;let F=Pe(N),pe=_e(N,F)[0]??"value",ce={id:g(),field:N,operator:F,valueSource:pe,value:""},Ze=Ke(ce);return{...ce,value:Ze}},[Z,c,Pe,Ke,_e,g]),ze=(0,de.useCallback)(N=>N?{id:g(),rules:b?[Te()]:[],not:!1}:{id:g(),rules:b?[Te()]:[],combinator:me(T)??"",not:!1},[b,T,Te,g]);return{qbId:t,rqbContext:J,fields:Z,fieldMap:O,combinators:T,getOperatorsMain:He,getRuleDefaultOperator:Pe,getValueEditorTypeMain:ke,getValueSourcesMain:_e,getValuesMain:Je,getRuleDefaultValue:Ke,getInputTypeMain:q,createRule:Te,createRuleGroup:ze}};var fr=e=>dr(e,mr(e));var ro=(e,t)=>{};var je=require("clsx"),Y=require("react");var yr=e=>{let{id:t,path:o,rule:n,schema:r,actions:{moveRule:l,onPropChange:a,onRuleRemove:p},disabled:f,parentDisabled:s,shiftUpDisabled:m,shiftDownDisabled:u,field:c,operator:y,value:R,valueSource:i,dragMonitorId:d="",dropMonitorId:k="",dndRef:D=null,dragRef:S=null,isDragging:G=!1,isOver:h=!1}=e,{classNames:b,fields:A,fieldMap:v,getInputType:w,getOperators:g,getValueEditorType:$,getValueEditorSeparator:L,getValueSources:J,getValues:x,validationMap:se,enableDragAndDrop:z,getRuleClassname:Z}=r;it("rule",!n),ro(z,!!(d||k||D||S));let O=!!s||!!f,T=(0,Y.useMemo)(()=>n||{id:t,field:c??"",operator:y??"",value:R,valueSource:i},[c,t,y,n,R,i]),Re=(0,Y.useMemo)(()=>({shiftActions:(0,je.clsx)(E.shiftActions,b.shiftActions),dragHandle:(0,je.clsx)(E.dragHandle,b.dragHandle),fields:(0,je.clsx)(E.fields,b.valueSelector,b.fields),operators:(0,je.clsx)(E.operators,b.valueSelector,b.operators),valueSource:(0,je.clsx)(E.valueSource,b.valueSelector,b.valueSource),value:(0,je.clsx)(E.value,b.value),cloneRule:(0,je.clsx)(E.cloneRule,b.actionElement,b.cloneRule),lockRule:(0,je.clsx)(E.lockRule,b.actionElement,b.lockRule),removeRule:(0,je.clsx)(E.removeRule,b.actionElement,b.removeRule)}),[b.shiftActions,b.dragHandle,b.valueSelector,b.fields,b.operators,b.valueSource,b.value,b.actionElement,b.cloneRule,b.lockRule,b.removeRule]),He=(0,Y.useCallback)(Ge=>(et,oe)=>{O||a(Ge,et,o)},[O,a,o]),Pe=(0,Y.useCallback)((Ge,et)=>{if(!O){let oe=[...X(o),o[o.length-1]+1];l(o,oe,!0)}},[O,l,o]),ke=(0,Y.useCallback)((Ge,et)=>{a("disabled",!O,o)},[O,a,o]),_e=(0,Y.useCallback)((Ge,et)=>{O||p(o)},[O,p,o]),Je=(0,Y.useCallback)((Ge,et)=>{!O&&!m&&l(o,"up",Ge?.altKey)},[O,l,o,m]),Ke=(0,Y.useCallback)((Ge,et)=>{!O&&!u&&l(o,"down",Ge?.altKey)},[O,l,o,u]),q=(0,Y.useMemo)(()=>v?.[T.field]??{name:T.field,value:T.field,label:T.field},[v,T.field]),Te=(0,Y.useMemo)(()=>q.inputType??w(T.field,T.operator,{fieldData:q}),[q,w,T.field,T.operator]),ze=(0,Y.useMemo)(()=>g(T.field,{fieldData:q}),[q,g,T.field]),N=(0,Y.useMemo)(()=>Ce(ze,T.operator),[ze,T.operator]),C=N?.arity,F=typeof C=="string"&&C==="unary"||typeof C=="number"&&C<2,pe=(0,Y.useMemo)(()=>typeof q.valueSources=="function"?q.valueSources(T.operator):q.valueSources??J(T.field,T.operator,{fieldData:q}),[q,J,T.field,T.operator]),ce=(0,Y.useMemo)(()=>T.valueSource==="field"?"select":$(T.field,T.operator,{fieldData:q}),[q,$,T.field,T.operator,T.valueSource]),Ze=(0,Y.useMemo)(()=>L(T.field,T.operator,{fieldData:q}),[q,L,T.field,T.operator]),Fe=(0,Y.useMemo)(()=>T.valueSource==="field"?Mt(q,A,T.operator):q.values??x(T.field,T.operator,{fieldData:q}),[q,A,x,T.field,T.operator,T.valueSource]),gt=(0,Y.useMemo)(()=>pe.map(Ge=>({name:Ge,value:Ge,label:Ge})),[pe]),nt=(0,Y.useMemo)(()=>se[t??""]??(typeof q.validator=="function"?q.validator(T):null),[q,t,T,se]),ee=(0,Y.useMemo)(()=>Yt(nt),[nt]),te=(0,Y.useMemo)(()=>q?.className??"",[q?.className]),ve=(0,Y.useMemo)(()=>N?.className??"",[N?.className]),Gt=(0,je.clsx)(Z(T,{fieldData:q}),te,ve,E.rule,b.rule,{[E.disabled]:O,[E.dndDragging]:G,[E.dndOver]:h},ee);return{...e,classNames:Re,cloneRule:Pe,disabled:O,dndRef:D,dragMonitorId:d,dragRef:S,dropMonitorId:k,fieldData:q,generateOnChangeHandler:He,hideValueControls:F,inputType:Te,operators:ze,outerClassName:Gt,removeRule:_e,rule:T,shiftRuleUp:Je,shiftRuleDown:Ke,toggleLockRule:ke,validationResult:nt,valueEditorSeparator:Ze,valueEditorType:ce,values:Fe,valueSourceOptions:gt,valueSources:pe}};var Se=require("clsx"),le=require("react");var br=e=>{let{id:t,path:o,ruleGroup:n,schema:{qbId:r,accessibleDescriptionGenerator:l,classNames:a,combinators:p,createRule:f,createRuleGroup:s,disabledPaths:m,independentCombinators:u,validationMap:c,enableDragAndDrop:y,getRuleGroupClassname:R},actions:{onGroupAdd:i,onGroupRemove:d,onPropChange:k,onRuleAdd:D,moveRule:S},disabled:G,parentDisabled:h,shiftUpDisabled:b,shiftDownDisabled:A,combinator:v,rules:w,not:g,dragMonitorId:$="",dropMonitorId:L="",previewRef:J=null,dragRef:x=null,dropRef:se=null,isDragging:z=!1,isOver:Z=!1}=e;it("ruleGroup",!n),ro(y,!!($||L||J||x||se));let O=!!h||!!G,T=(0,le.useMemo)(()=>n&&_(n)?n.combinator:n?me(p):v??me(p),[v,p,n]),Re=(0,le.useMemo)(()=>n?{...n,...u?{}:{combinator:T}}:{rules:w,not:g},[T,u,g,n,w]),He=(0,le.useMemo)(()=>({header:(0,Se.clsx)(E.header,a.header,{[E.dndOver]:Z}),shiftActions:(0,Se.clsx)(E.shiftActions,a.shiftActions),dragHandle:(0,Se.clsx)(E.dragHandle,a.dragHandle),combinators:(0,Se.clsx)(E.combinators,a.valueSelector,a.combinators),notToggle:(0,Se.clsx)(E.notToggle,a.notToggle),addRule:(0,Se.clsx)(E.addRule,a.actionElement,a.addRule),addGroup:(0,Se.clsx)(E.addGroup,a.actionElement,a.addGroup),cloneGroup:(0,Se.clsx)(E.cloneGroup,a.actionElement,a.cloneGroup),lockGroup:(0,Se.clsx)(E.lockGroup,a.actionElement,a.lockGroup),removeGroup:(0,Se.clsx)(E.removeGroup,a.actionElement,a.removeGroup),body:(0,Se.clsx)(E.body,a.body)}),[a.actionElement,a.addGroup,a.addRule,a.body,a.cloneGroup,a.combinators,a.dragHandle,a.header,a.lockGroup,a.notToggle,a.removeGroup,a.shiftActions,a.valueSelector,Z]),Pe=(0,le.useCallback)((ee,te)=>{O||k("combinator",ee,o)},[O,k,o]),ke=(0,le.useCallback)((ee,te,ve)=>{O||k("combinator",ee,o.concat([te]))},[O,k,o]),_e=(0,le.useCallback)((ee,te)=>{O||k("not",ee,o)},[O,k,o]),Je=(0,le.useCallback)((ee,te)=>{if(!O){let ve=f();D(ve,o,te)}},[f,O,D,o]),Ke=(0,le.useCallback)((ee,te)=>{if(!O){let ve=s(u);i(ve,o,te)}},[s,O,u,i,o]),q=(0,le.useCallback)((ee,te)=>{if(!O){let ve=[...X(o),o[o.length-1]+1];S(o,ve,!0)}},[O,S,o]),Te=(0,le.useCallback)((ee,te)=>{!O&&!b&&S(o,"up",ee?.altKey)},[O,S,o,b]),ze=(0,le.useCallback)((ee,te)=>{!O&&!A&&S(o,"down",ee?.altKey)},[O,S,o,A]),N=(0,le.useCallback)((ee,te)=>{k("disabled",!O,o)},[O,k,o]),C=(0,le.useCallback)((ee,te)=>{O||d(o)},[O,d,o]),F=(0,le.useMemo)(()=>c[t??""],[t,c]),pe=(0,le.useMemo)(()=>Yt(F),[F]),ce=(0,le.useMemo)(()=>u?null:Ce(p,T)?.className??"",[T,p,u]),Ze=(0,le.useMemo)(()=>R(Re),[R,Re]),Fe=(0,le.useMemo)(()=>(0,Se.clsx)(Ze,ce,E.ruleGroup,a.ruleGroup,{[E.disabled]:O,[E.dndDragging]:z},pe),[a.ruleGroup,ce,O,Ze,z,pe]),gt=(0,le.useMemo)(()=>{let ee=[];for(let te=0;te<Re.rules.length;te++){let ve=[...o,te];ee[te]={path:ve,disabled:O||m.some(Gt=>Me(ve,Gt))}}return ee},[O,o,Re.rules.length,m]),nt=(0,le.useMemo)(()=>l({path:o,qbId:r}),[l,o,r]);return{...e,addGroup:Ke,addRule:Je,accessibleDescription:nt,classNames:He,cloneGroup:q,combinator:T,disabled:O,dragMonitorId:$,dragRef:x,dropMonitorId:L,dropRef:se,isDragging:z,isOver:Z,onCombinatorChange:Pe,onGroupAdd:i,onIndependentCombinatorChange:ke,onNotToggleChange:_e,outerClassName:Fe,parentDisabled:h,pathsMemo:gt,previewRef:J,removeGroup:C,ruleGroup:Re,shiftGroupUp:Te,shiftGroupDown:ze,toggleLockGroup:N,validationClassName:pe,validationResult:F}};var yn=require("react"),hr=e=>{let{multiple:t,onChange:o}=e;return(0,yn.useMemo)(()=>t?r=>o(Array.from(r.target.selectedOptions).map(l=>l.value)):r=>o(r.target.value),[t,o])};var bn=require("react"),xe=e=>(0,bn.useCallback)((t,o)=>{t?.preventDefault(),t?.stopPropagation(),e(t,o)},[e]);var hn=require("immer"),Pt=require("react");var Rr=e=>{let{handleOnChange:t,inputType:o,operator:n,value:r,listsAsArrays:l,parseNumbers:a,values:p,type:f,skipHook:s}=e;(0,Pt.useEffect)(()=>{!s&&f!=="multiselect"&&!["between","notBetween","in","notIn"].includes(n)&&(Array.isArray(r)||o==="number"&&typeof r=="string"&&r.includes(","))&&t(V(r)[0]??"")},[t,o,n,s,f,r]);let m=(0,Pt.useMemo)(()=>V(r),[r]),u=(0,Pt.useCallback)((c,y)=>{let R=(0,hn.produce)(m,i=>{i[y]=W(c,{parseNumbers:a}),y===0&&(n==="between"||n==="notBetween")&&(i.length<2||typeof i[1]>"u")&&(i[1]=me(p))});t(l?R:ut(R,","))},[t,l,n,a,m,p]);return{valueAsArray:m,multiValueHandler:u}};var xo=require("react");var gr=e=>{let{handleOnChange:t,listsAsArrays:o=!1,multiple:n=!1,value:r}=e,l=(0,xo.useCallback)(p=>{if(n){let f=V(p);t(o?f:ut(f,","))}else t(p)},[t,o,n]),a=(0,xo.useMemo)(()=>n?V(r):r,[n,r]);return{onChange:l,val:a}};var Rn=require("react"),Le=(0,Rn.createContext)({});var Gn=[],xn=e=>ht.createElement(gn.Provider,{context:st,store:Bo},e.children),Dl=({props:e})=>{let t=fr(e),o=t.schema.controls.ruleGroup;return ht.createElement(Le.Provider,{key:t.dndEnabledAttr,value:t.rqbContext},ht.createElement("div",{role:"form",className:t.wrapperClassName,"data-dnd":t.dndEnabledAttr,"data-inlinecombinators":t.inlineCombinatorsAttr},ht.createElement(o,{translations:t.translations,ruleGroup:t.rootGroup,rules:t.rootGroup.rules,...t.combinatorPropObject,not:!!t.rootGroup.not,schema:t.schema,actions:t.actions,id:t.rootGroup.id,path:Gn,disabled:t.rootGroupDisabled,shiftUpDisabled:!0,shiftDownDisabled:!0,parentDisabled:t.queryDisabled,context:e.context})))},vn=e=>ht.createElement(xn,null,ht.createElement(Dl,{props:e}));var ae=Ae(require("react"));var Gr=ae.memo(e=>{let t=yr(e),o=xe(t.cloneRule),n=xe(t.toggleLockRule),r=xe(t.removeRule),l=xe(t.shiftRuleUp),a=xe(t.shiftRuleDown);return ae.createElement("div",{ref:t.dndRef,"data-testid":I.rule,"data-dragmonitorid":t.dragMonitorId,"data-dropmonitorid":t.dropMonitorId,className:t.outerClassName,"data-rule-id":t.id,"data-level":t.path.length,"data-path":JSON.stringify(t.path)},ae.createElement(On,{...t,cloneRule:o,toggleLockRule:n,removeRule:r,shiftRuleUp:l,shiftRuleDown:a}))}),On=ae.memo(e=>{let{schema:{controls:{shiftActions:t,dragHandle:o,fieldSelector:n,operatorSelector:r,valueSourceSelector:l,valueEditor:a,cloneRuleAction:p,lockRuleAction:f,removeRuleAction:s}},combinator:m}=e;return ae.createElement(ae.Fragment,null,e.schema.showShiftActions&&ae.createElement(t,{testID:I.shiftActions,level:e.path.length,path:e.path,titles:{shiftUp:e.translations.shiftActionUp.title,shiftDown:e.translations.shiftActionDown.title},labels:{shiftUp:e.translations.shiftActionUp.label,shiftDown:e.translations.shiftActionDown.label},className:e.classNames.shiftActions,disabled:e.disabled,shiftUp:e.shiftRuleUp,shiftDown:e.shiftRuleDown,shiftUpDisabled:e.shiftUpDisabled,shiftDownDisabled:e.shiftDownDisabled,context:e.context,validation:e.validationResult,schema:e.schema,ruleOrGroup:e.rule}),e.schema.enableDragAndDrop&&ae.createElement(o,{testID:I.dragHandle,ref:e.dragRef,level:e.path.length,path:e.path,title:e.translations.dragHandle.title,label:e.translations.dragHandle.label,className:e.classNames.dragHandle,disabled:e.disabled,context:e.context,validation:e.validationResult,schema:e.schema,ruleOrGroup:e.rule}),m,ae.createElement(n,{testID:I.fields,options:e.schema.fields,title:e.translations.fields.title,value:e.rule.field,operator:e.rule.operator,className:e.classNames.fields,handleOnChange:e.generateOnChangeHandler("field"),level:e.path.length,path:e.path,disabled:e.disabled,context:e.context,validation:e.validationResult,schema:e.schema,rule:e.rule}),(e.schema.autoSelectField||e.rule.field!==e.translations.fields.placeholderName)&&ae.createElement(ae.Fragment,null,ae.createElement(r,{testID:I.operators,field:e.rule.field,fieldData:e.fieldData,title:e.translations.operators.title,options:e.operators,value:e.rule.operator,className:e.classNames.operators,handleOnChange:e.generateOnChangeHandler("operator"),level:e.path.length,path:e.path,disabled:e.disabled,context:e.context,validation:e.validationResult,schema:e.schema,rule:e.rule}),(e.schema.autoSelectOperator||e.rule.operator!==e.translations.operators.placeholderName)&&!e.hideValueControls&&ae.createElement(ae.Fragment,null,!["null","notNull"].includes(e.rule.operator)&&e.valueSources.length>1&&ae.createElement(l,{testID:I.valueSourceSelector,field:e.rule.field,fieldData:e.fieldData,title:e.translations.valueSourceSelector.title,options:e.valueSourceOptions,value:e.rule.valueSource??"value",className:e.classNames.valueSource,handleOnChange:e.generateOnChangeHandler("valueSource"),level:e.path.length,path:e.path,disabled:e.disabled,context:e.context,validation:e.validationResult,schema:e.schema,rule:e.rule}),ae.createElement(a,{testID:I.valueEditor,field:e.rule.field,fieldData:e.fieldData,title:e.translations.value.title,operator:e.rule.operator,value:e.rule.value,valueSource:e.rule.valueSource??"value",type:e.valueEditorType,inputType:e.inputType,values:e.values,listsAsArrays:e.schema.listsAsArrays,parseNumbers:e.schema.parseNumbers,separator:e.valueEditorSeparator,className:e.classNames.value,handleOnChange:e.generateOnChangeHandler("value"),level:e.path.length,path:e.path,disabled:e.disabled,context:e.context,validation:e.validationResult,schema:e.schema,rule:e.rule}))),e.schema.showCloneButtons&&ae.createElement(p,{testID:I.cloneRule,label:e.translations.cloneRule.label,title:e.translations.cloneRule.title,className:e.classNames.cloneRule,handleOnClick:e.cloneRule,level:e.path.length,path:e.path,disabled:e.disabled,context:e.context,validation:e.validationResult,ruleOrGroup:e.rule,schema:e.schema}),e.schema.showLockButtons&&ae.createElement(f,{testID:I.lockRule,label:e.translations.lockRule.label,title:e.translations.lockRule.title,className:e.classNames.lockRule,handleOnClick:e.toggleLockRule,level:e.path.length,path:e.path,disabled:e.disabled,disabledTranslation:e.parentDisabled?void 0:e.translations.lockRuleDisabled,context:e.context,validation:e.validationResult,ruleOrGroup:e.rule,schema:e.schema}),ae.createElement(s,{testID:I.removeRule,label:e.translations.removeRule.label,title:e.translations.removeRule.title,className:e.classNames.removeRule,handleOnClick:e.removeRule,level:e.path.length,path:e.path,disabled:e.disabled,context:e.context,validation:e.validationResult,ruleOrGroup:e.rule,schema:e.schema}))});var j=Ae(require("react")),An=require("react");var xr=j.memo(e=>{let t=br(e),o=xe(t.addRule),n=xe(t.addGroup),r=xe(t.cloneGroup),l=xe(t.toggleLockGroup),a=xe(t.removeGroup),p=xe(t.shiftGroupUp),f=xe(t.shiftGroupDown);return j.createElement("div",{ref:t.previewRef,title:t.accessibleDescription,className:t.outerClassName,"data-testid":I.ruleGroup,"data-dragmonitorid":t.dragMonitorId,"data-dropmonitorid":t.dropMonitorId,"data-rule-group-id":t.id,"data-level":t.path.length,"data-path":JSON.stringify(t.path)},j.createElement("div",{ref:t.dropRef,className:t.classNames.header},j.createElement(Cn,{...t,addRule:o,addGroup:n,cloneGroup:r,toggleLockGroup:l,removeGroup:a,shiftGroupUp:p,shiftGroupDown:f})),j.createElement("div",{className:t.classNames.body},j.createElement(Tn,{...t,addRule:o,addGroup:n,cloneGroup:r,toggleLockGroup:l,removeGroup:a,shiftGroupUp:p,shiftGroupDown:f})))}),Cn=j.memo(e=>{let{schema:{controls:{shiftActions:t,dragHandle:o,combinatorSelector:n,notToggle:r,addRuleAction:l,addGroupAction:a,cloneGroupAction:p,lockGroupAction:f,removeGroupAction:s}}}=e;return j.createElement(j.Fragment,null,e.schema.showShiftActions&&e.path.length>0&&j.createElement(t,{key:I.shiftActions,testID:I.shiftActions,level:e.path.length,path:e.path,titles:{shiftUp:e.translations.shiftActionUp.title,shiftDown:e.translations.shiftActionDown.title},labels:{shiftUp:e.translations.shiftActionUp.label,shiftDown:e.translations.shiftActionDown.label},className:e.classNames.shiftActions,disabled:e.disabled,shiftUp:e.shiftGroupUp,shiftDown:e.shiftGroupDown,shiftUpDisabled:e.shiftUpDisabled,shiftDownDisabled:e.shiftDownDisabled,context:e.context,validation:e.validationResult,schema:e.schema,ruleOrGroup:e.ruleGroup}),e.path.length>0&&e.schema.enableDragAndDrop&&j.createElement(o,{key:I.dragHandle,testID:I.dragHandle,ref:e.dragRef,level:e.path.length,path:e.path,title:e.translations.dragHandle.title,label:e.translations.dragHandle.label,className:e.classNames.dragHandle,disabled:e.disabled,context:e.context,validation:e.validationResult,schema:e.schema,ruleOrGroup:e.ruleGroup}),e.path.length>0&&j.createElement("span",{className:"statement"},"Any of the following are true..."),!e.schema.showCombinatorsBetweenRules&&!e.schema.independentCombinators&&j.createElement(n,{key:I.combinators,testID:I.combinators,options:e.schema.combinators,value:e.combinator,title:e.translations.combinators.title,className:e.classNames.combinators,handleOnChange:e.onCombinatorChange,rules:e.ruleGroup.rules,level:e.path.length,path:e.path,disabled:e.disabled,context:e.context,validation:e.validationResult,schema:e.schema}),e.schema.showNotToggle&&j.createElement(r,{key:I.notToggle,testID:I.notToggle,className:e.classNames.notToggle,title:e.translations.notToggle.title,label:e.translations.notToggle.label,checked:e.ruleGroup.not,handleOnChange:e.onNotToggleChange,level:e.path.length,disabled:e.disabled,path:e.path,context:e.context,validation:e.validationResult,schema:e.schema,ruleGroup:e.ruleGroup}),j.createElement(l,{key:I.addRule,testID:I.addRule,label:e.translations.addRule.label,title:e.translations.addRule.title,className:e.classNames.addRule,handleOnClick:e.addRule,rules:e.ruleGroup.rules,level:e.path.length,path:e.path,disabled:e.disabled,context:e.context,validation:e.validationResult,ruleOrGroup:e.ruleGroup,schema:e.schema}),j.createElement(a,{key:I.addGroup,testID:I.addGroup,label:e.translations.addGroup.label,title:e.translations.addGroup.title,className:e.classNames.addGroup,handleOnClick:e.addGroup,rules:e.ruleGroup.rules,level:e.path.length,path:e.path,disabled:e.disabled,context:e.context,validation:e.validationResult,ruleOrGroup:e.ruleGroup,schema:e.schema}),e.schema.showCloneButtons&&e.path.length>=1&&j.createElement(p,{key:I.cloneGroup,testID:I.cloneGroup,label:e.translations.cloneRuleGroup.label,title:e.translations.cloneRuleGroup.title,className:e.classNames.cloneGroup,handleOnClick:e.cloneGroup,rules:e.ruleGroup.rules,level:e.path.length,path:e.path,disabled:e.disabled,context:e.context,validation:e.validationResult,ruleOrGroup:e.ruleGroup,schema:e.schema}),e.schema.showLockButtons&&j.createElement(f,{key:I.lockGroup,testID:I.lockGroup,label:e.translations.lockGroup.label,title:e.translations.lockGroup.title,className:e.classNames.lockGroup,handleOnClick:e.toggleLockGroup,rules:e.ruleGroup.rules,level:e.path.length,path:e.path,disabled:e.disabled,disabledTranslation:e.parentDisabled?void 0:e.translations.lockGroupDisabled,context:e.context,validation:e.validationResult,ruleOrGroup:e.ruleGroup,schema:e.schema}),e.path.length>0&&j.createElement(s,{key:I.removeGroup,testID:I.removeGroup,label:e.translations.removeGroup.label,title:e.translations.removeGroup.title,className:e.classNames.removeGroup,handleOnClick:e.removeGroup,rules:e.ruleGroup.rules,level:e.path.length,path:e.path,disabled:e.disabled,context:e.context,validation:e.validationResult,ruleOrGroup:e.ruleGroup,schema:e.schema}))}),Tn=j.memo(e=>{let{schema:{controls:{combinatorSelector:t,inlineCombinator:o,ruleGroup:n,rule:r}}}=e;return j.createElement(j.Fragment,null,e.ruleGroup.rules.map((l,a,{length:p})=>{let f=e.pathsMemo[a],s=f.path,m=f.disabled||typeof l!="string"&&l.disabled,u=Me([0],s),c=e.path.length===0&&a===p-1,y=typeof l=="string"?[...s,l].join("-"):l.id,R=!e.schema.independentCombinators&&e.schema.showCombinatorsBetweenRules;return j.createElement(An.Fragment,{key:y},typeof l=="string"?j.createElement(o,{key:`${I.inlineCombinator}-independent`,options:e.schema.combinators,value:l,title:e.translations.combinators.title,className:e.classNames.combinators,handleOnChange:i=>e.onIndependentCombinatorChange(i,a),rules:e.ruleGroup.rules,level:e.path.length,context:e.context,validation:e.validationResult,component:t,path:s,disabled:m,schema:e.schema}):P(l)?j.createElement(n,{key:I.ruleGroup,id:l.id,schema:e.schema,actions:e.actions,path:s,translations:e.translations,ruleGroup:l,rules:l.rules,combinator:_(l)?l.combinator:void 0,not:!!l.not,disabled:m,parentDisabled:e.parentDisabled||e.disabled,shiftUpDisabled:u,shiftDownDisabled:c,context:e.context}):j.createElement(r,{key:I.rule,id:l.id,rule:l,field:l.field,operator:l.operator,value:l.value,valueSource:l.valueSource,schema:e.schema,actions:e.actions,path:s,disabled:m,parentDisabled:e.parentDisabled||e.disabled,translations:e.translations,shiftUpDisabled:u,shiftDownDisabled:c,context:e.context,combinator:a===1&&R?j.createElement(o,{key:I.inlineCombinator,options:e.schema.combinators,value:e.combinator,title:e.translations.combinators.title,className:e.classNames.combinators,handleOnChange:e.onCombinatorChange,rules:e.ruleGroup.rules,level:e.path.length,context:e.context,validation:e.validationResult,component:t,path:s,disabled:e.disabled,schema:e.schema}):a>1&&R?j.createElement("span",{className:e.classNames.combinators},e.combinator):e.path.length===0&&R?j.createElement("span",{className:e.classNames.combinators},"Where"):j.createElement("span",{className:e.classNames.combinators})}))}))});var vo=Ae(require("react")),vr=e=>vo.createElement("div",{"data-testid":e.testID,className:e.className},vo.createElement("button",{disabled:e.disabled||e.shiftUpDisabled,onClick:e.shiftUp,title:e.titles?.shiftUp},e.labels?.shiftUp),vo.createElement("button",{disabled:e.disabled||e.shiftDownDisabled,onClick:e.shiftDown,title:e.titles?.shiftDown},e.labels?.shiftDown));var Ue=Ae(require("react"));var Or=e=>{let{operator:t,value:o,handleOnChange:n,title:r,className:l,type:a="text",inputType:p="text",values:f=[],listsAsArrays:s,parseNumbers:m,fieldData:u,disabled:c,separator:y=null,testID:R,selectorComponent:i=e.schema.controls.valueSelector,...d}=e,{valueAsArray:k,multiValueHandler:D}=Rr(e);if(t==="null"||t==="notNull")return null;let S=u?.placeholder??"",G=["in","notIn"].includes(t)?"text":p||"text";if((t==="between"||t==="notBetween")&&(a==="select"||a==="text")){let h=["from","to"].map((b,A)=>a==="text"?Ue.createElement("input",{key:b,type:G,placeholder:S,value:k[A]??"",className:E.valueListItem,disabled:c,onChange:v=>D(v.target.value,A)}):Ue.createElement(i,{...d,schema:e.schema,key:b,className:E.valueListItem,handleOnChange:v=>D(v,A),disabled:c,value:k[A]??me(f),options:f,listsAsArrays:s}));return Ue.createElement("span",{"data-testid":R,className:l,title:r},h[0],y,h[1])}switch(a){case"select":case"multiselect":return Ue.createElement(i,{...d,schema:e.schema,testID:R,className:l,title:r,handleOnChange:n,disabled:c,value:o,options:f,multiple:a==="multiselect",listsAsArrays:s});case"textarea":return Ue.createElement("textarea",{"data-testid":R,placeholder:S,value:o,title:r,className:l,disabled:c,onChange:h=>n(h.target.value)});case"switch":case"checkbox":return Ue.createElement("input",{"data-testid":R,type:"checkbox",className:l,title:r,onChange:h=>n(h.target.checked),checked:!!o,disabled:c});case"radio":return Ue.createElement("span",{"data-testid":R,className:l,title:r},f.map(h=>Ue.createElement("label",{key:h.name},Ue.createElement("input",{type:"radio",value:h.name,disabled:c,checked:o===h.name,onChange:b=>n(b.target.value)}),h.label)))}return Ue.createElement("input",{"data-testid":R,type:G,placeholder:S,value:o,title:r,className:l,disabled:c,onChange:h=>n(W(h.target.value,{parseNumbers:m}))})};var $n=Ae(require("react"));var Rt=e=>{let{onChange:t,val:o}=gr(e),n=hr({multiple:e.multiple,onChange:t});return $n.createElement("select",{"data-testid":e.testID,className:e.className,value:o,title:e.title,disabled:e.disabled,multiple:!!e.multiple,onChange:n},pr(e.options))};var St={actionElement:Qe,addGroupAction:Qe,addRuleAction:Qe,cloneGroupAction:Qe,cloneRuleAction:Qe,combinatorSelector:Rt,dragHandle:So,fieldSelector:Rt,inlineCombinator:wo,lockGroupAction:Qe,lockRuleAction:Qe,notToggle:ko,operatorSelector:Rt,removeGroupAction:Qe,removeRuleAction:Qe,rule:Gr,ruleGroup:xr,shiftActions:vr,valueEditor:Or,valueSelector:Rt,valueSourceSelector:Rt};0&&(module.exports={ActionElement,DragHandle,InlineCombinator,LogType,NotToggle,QueryBuilder,QueryBuilderContext,QueryBuilderStateContext,QueryBuilderStateProvider,Rule,RuleComponents,RuleGroup,RuleGroupBodyComponents,RuleGroupHeaderComponents,ShiftActions,TestID,ValueEditor,ValueSelector,add,convertFromIC,convertQuery,convertToIC,defaultCELValueProcessor,defaultCombinators,defaultCombinatorsExtended,defaultControlClassnames,defaultControlElements,defaultJoinChar,defaultMongoDBValueProcessor,defaultOperatorNegationMap,defaultOperators,defaultPlaceholderFieldGroupLabel,defaultPlaceholderFieldLabel,defaultPlaceholderFieldName,defaultPlaceholderOperatorGroupLabel,defaultPlaceholderOperatorLabel,defaultPlaceholderOperatorName,defaultRuleProcessorCEL,defaultRuleProcessorElasticSearch,defaultRuleProcessorJSONata,defaultRuleProcessorJsonLogic,defaultRuleProcessorMongoDB,defaultRuleProcessorParameterized,defaultRuleProcessorSQL,defaultRuleProcessorSpEL,defaultSpELValueProcessor,defaultTranslations,defaultValidator,defaultValueProcessor,defaultValueProcessorByRule,defaultValueProcessorCELByRule,defaultValueProcessorMongoDBByRule,defaultValueProcessorSpELByRule,filterFieldsByComparator,findPath,formatQuery,generateAccessibleDescription,generateID,getCommonAncestorPath,getCompatContextProvider,getFirstOption,getOption,getParentPath,getQuerySelectorById,getValidationClassNames,getValueSourcesUtil,groupInvalidReasons,insert,isAncestor,isFlexibleOptionGroupArray,isFullOptionGroupArray,isOptionGroupArray,isPojo,isRuleGroup,isRuleGroupType,isRuleGroupTypeIC,isRuleOrGroupValid,isValidationResult,joinWith,jsonLogicAdditionalOperators,mergeClassnames,mergeTranslation,mergeTranslations,messages,move,nullFreeArray,numericRegex,objectEntries,objectKeys,parseNumber,pathIsDisabled,pathsAreEqual,preferProp,prepareRule,prepareRuleGroup,prepareRuleOrGroup,queryBuilderStore,regenerateID,regenerateIDs,remove,rootPath,splitBy,standardClassnames,toArray,toFlatOptionArray,toFullOption,toFullOptionList,toFullOptionMap,toOptions,transformQuery,trimIfString,uniqByIdentifier,uniqByName,uniqOptGroups,uniqOptList,update,useControlledOrUncontrolled,useDeprecatedProps,useMergedContext,usePreferAnyProp,usePreferProp,usePrevious,useQueryBuilder,useQueryBuilderQuery,useQueryBuilderSchema,useQueryBuilderSelector,useQueryBuilderSetup,useReactDndWarning,useRule,useRuleGroup,useSelectElementChangeHandler,useStopEventPropagation,useValueEditor,useValueSelector});
//# sourceMappingURL=react-querybuilder.cjs.production.js.map